<!-- Static Topbar -->
<nav class="topbar fixed-top">
  <div class="topbar-container">
    <div class="logo">
      <img src="../assets/images/profoundLogo.png" alt="Research Impact" />
    </div>
    <div class="topbar-right">
      <div class="user-profile">
        <!-- <span class="user-name">Welcome</span> -->
        <i class="fas fa-user-circle"></i>
      </div>
    </div>
  </div>
</nav>

<!-- Main Container with Sidebar -->
<div class="main-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <ul class="nav-menu">
      <!-- Level 1: Top categories -->
      <li class="nav-item has-submenu" *ngFor="let category of menuItems">
        <a href="#" class="nav-link" (click)="$event.preventDefault()">
          <i class="fas fa-book"></i>
          <span>{{ category.title }}</span>
          <i class="fas fa-chevron-down submenu-arrow"></i>
        </a>

        <!-- Level 2: Items under each category -->
        <ul class="submenu" [ngClass]="{ show: category.open }">
          <li class="has-submenu" *ngFor="let item of category.items">
            <a href="#" (click)="$event.preventDefault()">
              <span>{{ item.title }}</span>
              <i class="fas fa-chevron-down submenu-arrow"></i>
            </a>

            <!-- Level 3: Subitems -->
            <ul class="submenu">
              <li *ngFor="let subitem of item.subitems">
                <a
                  href="#"
                  (click)="
                    anchorSection({ title: subitem }); $event.preventDefault()
                  "
                >
                  <span>{{ subitem }}</span>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Main Content Area -->
  <div class="content">
    <div id="search-grants">
      <!-- Add the descriptive information here -->
      <div
        class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
      >
        <h2 class="text-xl font-semibold mb-2">Search grants</h2>
        <p class="text-gray-700 mb-2">
          Retrieves detailed information about grants using filters as
          parameters. The search parameters can be multiple.
        </p>
        <div class="text-sm text-gray-600">
          <p>Endpoint: <span class="font-mono">POST /grant/search</span></p>
          <p>
            Endpoint sample:
            <a
              href="https://api.research.profoundimpact.com/v1/grant/search"
              class="text-indigo-600 hover:text-indigo-800"
              target="_blank"
              >https://api.research.profoundimpact.com/v1/grant/search</a
            >
          </p>
        </div>
      </div>

      <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
        <form
          [formGroup]="searchForm"
          class="space-y-6"
          (ngSubmit)="searchForGrants()"
        >
          <!-- First row -->
          <div>use semicolon (;) to enter multiple search phrases</div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="titles"
                class="block text-sm font-medium text-gray-700"
                >Titles:
              </label>
              <input
                type="text"
                id="titles"
                formControlName="titles"
                placeholder="Enter grant titles"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <div class="space-y-2">
              <label
                for="sources"
                class="block text-sm font-medium text-gray-700"
                >Sources:</label
              >
              <input
                type="text"
                id="sources"
                formControlName="sources"
                placeholder="Enter funding sources"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Second row -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="deadlineRangeStart"
                class="block text-sm font-medium text-gray-700"
                >Deadline start:</label
              >
              <input
                type="date"
                id="deadlineRangeStart"
                formControlName="deadlineRangeStart"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <div class="space-y-2">
              <label
                for="deadlineRangeEnd"
                class="block text-sm font-medium text-gray-700"
                >Deadline end:</label
              >
              <input
                type="date"
                id="deadlineRangeEnd"
                formControlName="deadlineRangeEnd"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Third row -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="keywords"
                class="block text-sm font-medium text-gray-700"
                >Keywords:</label
              >
              <input
                type="text"
                id="keywords"
                formControlName="keywords"
                placeholder="Enter relevant keywords"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <div class="space-y-2">
              <label
                for="areaOfResearches"
                class="block text-sm font-medium text-gray-700"
                >Area of research:</label
              >
              <input
                type="text"
                id="areaOfResearches"
                formControlName="areaOfResearches"
                placeholder="Enter area of research"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Fourth row -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="disciplines"
                class="block text-sm font-medium text-gray-700"
                >Disciplines:</label
              >
              <input
                type="text"
                id="disciplines"
                formControlName="disciplines"
                placeholder="Enter disciplines"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <div class="space-y-2">
              <label
                for="countries"
                class="block text-sm font-medium text-gray-700"
                >Countries:</label
              >
              <input
                type="text"
                id="countries"
                formControlName="countries"
                placeholder="Enter eligible countries"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Submit button with loading state -->
          <div class="flex justify-center gap-4">
            <button
              type="submit"
              [disabled]="isLoading() || !formIsValid()"
              class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
            >
              <span *ngIf="isLoading()">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Searching...
              </span>
              <span *ngIf="!isLoading()">Filter Grants</span>
            </button>
            <button
              type="button"
              (click)="resetForm()"
              class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              Reset
            </button>
          </div>
        </form>
      </div>

      <!-- Grant List Table -->
      <div class="max-w-9xl mx-auto mt-8">
        <h2 class="text-xl font-semibold mb-4">Search grant results</h2>

        <!-- Show loading spinner while fetching results -->
        <div *ngIf="isLoading()" class="flex justify-center py-8">
          <svg
            class="animate-spin h-10 w-10 text-indigo-600"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
        </div>

        <!-- Desktop Table View (hidden on small screens) -->
        <div
          *ngIf="!isLoading() && grants().length > 0"
          class="hidden md:block overflow-x-auto rounded-lg border border-gray-200 shadow-md"
        >
          <table
            class="min-w-full divide-y divide-gray-200 table-fixed w-full max-w-full"
          >
            <thead class="bg-gray-50">
              <tr>
                <th
                  scope="col"
                  class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  ID
                </th>
                <th
                  scope="col"
                  class="w-1/3 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Title
                </th>
                <th
                  scope="col"
                  class="w-1/6 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                >
                  Source
                </th>
                <th
                  scope="col"
                  class="w-20 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Status
                </th>
                <th
                  scope="col"
                  class="w-24 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                >
                  Budget
                </th>
                <th
                  scope="col"
                  class="w-32 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider xl:table-cell hidden"
                >
                  Deadline
                </th>
                <th
                  scope="col"
                  class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr *ngFor="let grant of grants()" class="hover:bg-gray-50">
                <td class="px-2 sm:px-4 py-2 text-sm font-medium text-gray-900">
                  {{ grant.id }}
                </td>
                <td class="px-2 sm:px-4 py-3 text-sm text-gray-900">
                  <div class="line-clamp-5" [title]="grant.title">
                    {{ grant.title }}
                  </div>
                </td>

                <td
                  class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                >
                  <div class="truncate" [title]="grant.source">
                    {{ grant.source }}
                  </div>
                </td>
                <td class="px-2 sm:px-4 py-2 text-sm">
                  <span
                    [ngClass]="{
                      'px-2 py-0.5 text-xs font-semibold rounded-full': true,
                      'bg-green-100 text-green-800': grant.status === 'Open',
                      'bg-red-100 text-red-800': grant.status === 'Closed',
                      'bg-yellow-100 text-yellow-800':
                        grant.status !== 'Open' && grant.status !== 'Closed'
                    }"
                  >
                    {{ grant.status }}
                  </span>
                </td>
                <td
                  class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                >
                  {{ grant.budget }}
                </td>
                <td
                  class="px-2 sm:px-4 py-2 text-sm text-gray-500 xl:table-cell hidden"
                >
                  <div class="space-y-0.5">
                    <div class="truncate text-xs">
                      <span class="font-medium">Type:</span>
                      {{ grant.deadlineType }}
                    </div>
                    <div class="truncate text-xs">
                      <span class="font-medium">Intake:</span>
                      {{ grant.deadlineIntake }}
                    </div>
                  </div>
                </td>
                <td class="px-2 sm:px-4 py-2 text-sm">
                  <div class="flex space-x-1">
                    <a
                      *ngIf="grant.websiteLink"
                      [href]="grant.websiteLink"
                      target="_blank"
                      class="text-indigo-600 hover:text-indigo-900"
                    >
                      <span class="sr-only">Website</span>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                    </a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Mobile Card View -->
        <div
          *ngIf="!isLoading() && grants().length > 0"
          class="md:hidden space-y-4"
        >
          <div
            *ngFor="let grant of grants()"
            class="bg-white rounded-lg shadow border border-gray-200 p-4"
          >
            <div class="flex justify-between items-start">
              <h3 class="font-medium text-gray-900">{{ grant.title }}</h3>
              <span
                [ngClass]="{
                  'px-2 py-1 text-xs font-semibold rounded-full': true,
                  'bg-green-100 text-green-800': grant.status === 'Open',
                  'bg-red-100 text-red-800': grant.status === 'Closed',
                  'bg-yellow-100 text-yellow-800':
                    grant.status !== 'Open' && grant.status !== 'Closed'
                }"
              >
                {{ grant.status }}
              </span>
            </div>

            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
              <div>
                <span class="text-gray-500">ID:</span>
                <span class="font-medium ml-1">{{ grant.id }}</span>
              </div>
              <div>
                <span class="text-gray-500">Budget:</span>
                <span class="font-medium ml-1">{{ grant.budget }}</span>
              </div>
              <div class="col-span-2">
                <span class="text-gray-500">Source:</span>
                <span class="font-medium ml-1">{{ grant.source }}</span>
              </div>
              <div>
                <span class="text-gray-500">Deadline Type:</span>
                <span class="font-medium ml-1">{{ grant.deadlineType }}</span>
              </div>
              <div>
                <span class="text-gray-500">Intake:</span>
                <span class="font-medium ml-1">{{ grant.deadlineIntake }}</span>
              </div>
            </div>

            <div class="mt-3 pt-3 border-t border-gray-100 flex justify-end">
              <a
                *ngIf="grant.websiteLink"
                [href]="grant.websiteLink"
                target="_blank"
                class="text-indigo-600 hover:text-indigo-900 flex items-center text-sm"
              >
                Visit website
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 ml-1"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>

        <!-- Empty state if no grants -->
        <div
          *ngIf="!isLoading() && grants().length === 0"
          class="bg-white rounded-lg shadow-md border border-gray-200 p-6"
        >
          <div class="flex flex-col items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-10 w-10 text-gray-400 mb-2"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            <p class="text-center text-gray-500">
              No grants found matching your filters.
            </p>
            <p class="mt-1 text-center text-gray-500">
              Try adjusting your search criteria.
            </p>
          </div>
        </div>
      </div>
    </div>
    <!-- Add this section within your content div -->
    <div id="get-a-single-grant" class="max-w-9xl mx-auto mb-8 mt-8">
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 mb-4">
        <h2 class="text-xl font-semibold mb-2">Get a single grant</h2>
        <p class="text-gray-700 mb-2">
          Retrieves detailed information about a specific grant using its unique
          identifier.
        </p>
        <div class="text-sm text-gray-600">
          <p>
            Endpoint: <span class="font-mono">GET /grant/{{'{{id}}'}}</span>
          </p>
          <p>
            Endpoint sample:
            <a
              href="https://api.research.profoundimpact.com/v1/grant/5249"
              class="text-indigo-600 hover:text-indigo-800"
              target="_blank"
              >https://api.research.profoundimpact.com/v1/grant/5249</a
            >
          </p>
        </div>
      </div>

      <!-- Input for grant ID and fetch button -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <div class="flex items-end space-x-4">
          <div class="flex-grow">
            <label
              for="grantId"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Grant ID:</label
            >
            <input
              type="number"
              id="grantId"
              #grantIdInput
              placeholder="Enter grant ID"
              class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            />
          </div>
          <button
            (click)="getSingleGrant(grantIdInput.value)"
            class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            <span *ngIf="!singleGrantLoading()">Fetch Grant</span>
            <span *ngIf="singleGrantLoading()" class="flex items-center">
              <svg
                class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
              Loading...
            </span>
          </button>
        </div>
      </div>

      <!-- Error message -->
      <div
        *ngIf="singleGrantError()"
        class="bg-red-50 border-l-4 border-red-500 p-4 mb-6"
      >
        <div class="flex">
          <div class="flex-shrink-0">
            <svg
              class="h-5 w-5 text-red-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <div class="ml-3">
            <p class="text-sm text-red-700">{{ singleGrantError() }}</p>
          </div>
        </div>
      </div>

      <!-- Grant details display -->
      <div
        *ngIf="singleGrant() && !singleGrantLoading()"
        class="bg-white shadow overflow-hidden sm:rounded-lg mb-8"
      >
        <!-- Header -->
        <div
          class="px-4 py-5 sm:px-6 bg-indigo-50 flex justify-between items-center"
        >
          <div>
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Grant #{{ singleGrant().basic.id }}
            </h3>
            <p class="mt-1 max-w-2xl text-sm text-gray-500">
              Created: {{ singleGrant().basic.createdDateTime }}
            </p>
          </div>
          <span
            [ngClass]="{
              'px-3 py-1 text-sm font-semibold rounded-full': true,
              'bg-green-100 text-green-800':
                singleGrant().basic.status === 'Open',
              'bg-red-100 text-red-800':
                singleGrant().basic.status === 'Closed',
              'bg-yellow-100 text-yellow-800':
                singleGrant().basic.status !== 'Open' &&
                singleGrant().basic.status !== 'Closed'
            }"
          >
            {{ singleGrant().basic.status }}
          </span>
        </div>

        <!-- Basic Information -->
        <div class="border-t border-gray-200">
          <dl>
            <div
              class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">Title</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{ singleGrant().basic.title }}
              </dd>
            </div>
            <div
              class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">Source</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{ singleGrant().basic.source }}
              </dd>
            </div>
            <div
              class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">Website</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <a
                  *ngIf="singleGrant().basic.websiteLink"
                  [href]="singleGrant().basic.websiteLink"
                  target="_blank"
                  class="text-indigo-600 hover:text-indigo-900"
                >
                  {{ singleGrant().basic.websiteLink }}
                </a>
                <span *ngIf="!singleGrant().basic.websiteLink"
                  >Not available</span
                >
              </dd>
            </div>
            <div
              class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">Summary</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{ singleGrant().basic.summary }}
              </dd>
            </div>
            <div
              class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">PDF File</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                {{ singleGrant().basic.pdfFileName || "No PDF file available" }}
              </dd>
            </div>
          </dl>
        </div>

        <!-- Areas of Research -->
        <div class="px-4 py-5 sm:px-6 bg-indigo-50">
          <h3 class="text-lg leading-6 font-medium text-gray-900">
            Areas of Research
          </h3>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
          <dl class="sm:divide-y sm:divide-gray-200">
            <!-- AOR Divisions -->
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">AOR Divisions</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex flex-wrap gap-2">
                  <span
                    *ngFor="let division of singleGrant().basic.aorDivisions"
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                  >
                    {{ division }}
                  </span>
                </div>
              </dd>
            </div>

            <!-- AOR Groups -->
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">AOR Groups</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex flex-wrap gap-2">
                  <span
                    *ngFor="let group of singleGrant().basic.aorGroups"
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                  >
                    {{ group }}
                  </span>
                </div>
              </dd>
            </div>

            <!-- AOR Details -->
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">AOR Details</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div
                  *ngFor="let detail of singleGrant().basic.aorDetails"
                  class="mb-4 p-3 border border-gray-200 rounded-md"
                >
                  <p class="font-medium text-indigo-600">{{ detail.a }}</p>
                  <p class="text-xs text-gray-500 mt-1">Date: {{ detail.t }}</p>
                  <div class="mt-2 text-sm">
                    <p>
                      <span class="font-medium">AI Context:</span>
                      {{ detail.ai_c }}
                    </p>
                    <p class="mt-1">
                      <span class="font-medium">AI Reasoning:</span>
                      {{ detail.ai_r }}
                    </p>
                    <p class="mt-1">
                      <span class="font-medium">AI Score:</span>
                      {{ detail.ai_s }}/10
                    </p>
                  </div>
                </div>
              </dd>
            </div>
          </dl>
        </div>

        <!-- Dates -->
        <div class="px-4 py-5 sm:px-6 bg-indigo-50">
          <h3 class="text-lg leading-6 font-medium text-gray-900">
            Deadlines & Dates
          </h3>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
          <dl class="sm:divide-y sm:divide-gray-200">
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Deadline Info</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex space-x-6">
                  <div>
                    <span class="font-medium">Type:</span>
                    {{ singleGrant().dates.deadlineType }}
                  </div>
                  <div>
                    <span class="font-medium">Intake:</span>
                    {{ singleGrant().dates.deadlineIntake }}
                  </div>
                  <div>
                    <span class="font-medium">Stage:</span>
                    {{ singleGrant().dates.deadlineStage }}
                  </div>
                </div>
              </dd>
            </div>

            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">
                Application Deadlines
              </dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="space-y-3">
                  <div
                    *ngFor="
                      let deadline of singleGrant().dates.applicationDeadlines;
                      let i = index
                    "
                    class="p-3 border border-gray-200 rounded-md"
                  >
                    <div class="font-medium">Deadline Set {{ i + 1 }}</div>
                    <div class="mt-2 grid grid-cols-2 gap-4">
                      <div>
                        <span class="text-gray-500">Application Deadline:</span>
                        <div class="font-medium">
                          {{ deadline.applicationDeadline }}
                        </div>
                      </div>
                      <div>
                        <span class="text-gray-500"
                          >Registration of Intent:</span
                        >
                        <div class="font-medium">
                          {{ deadline.registrationOfIntentDeadline }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </dd>
            </div>
          </dl>
        </div>

        <!-- Funds Information -->
        <div class="px-4 py-5 sm:px-6 bg-indigo-50">
          <h3 class="text-lg leading-6 font-medium text-gray-900">
            Funding Information
          </h3>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
          <dl class="sm:divide-y sm:divide-gray-200">
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Budget Details</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex space-x-6">
                  <div>
                    <span class="font-medium">Budget:</span>
                    {{
                      singleGrant().funds.budget > 0
                        ? (singleGrant().funds.budget
                          | currency : singleGrant().funds.currencyCode)
                        : "Not specified"
                    }}
                  </div>
                  <div>
                    <span class="font-medium">Award Amount:</span>
                    {{
                      singleGrant().funds.awardAmount > 0
                        ? (singleGrant().funds.awardAmount
                          | currency : singleGrant().funds.currencyCode)
                        : "Not specified"
                    }}
                  </div>
                  <div>
                    <span class="font-medium">Currency:</span>
                    {{ singleGrant().funds.currencyCode }}
                  </div>
                </div>
              </dd>
            </div>

            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">
                Budget Description
              </dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <p class="whitespace-pre-line">
                  {{ singleGrant().funds.budgetDescription }}
                </p>
              </dd>
            </div>
          </dl>
        </div>

        <!-- Keywords -->
        <div class="px-4 py-5 sm:px-6 bg-indigo-50">
          <h3 class="text-lg leading-6 font-medium text-gray-900">Keywords</h3>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
          <div class="flex flex-wrap gap-2">
            <span
              *ngFor="let keyword of singleGrant().keywords"
              class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800"
            >
              {{ keyword }}
            </span>
          </div>
        </div>

        <!-- Eligibility Information -->
        <div class="px-4 py-5 sm:px-6 bg-indigo-50">
          <h3 class="text-lg leading-6 font-medium text-gray-900">
            Eligibility Criteria
          </h3>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
          <dl class="sm:divide-y sm:divide-gray-200">
            <!-- Countries -->
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">
                Eligible Countries
              </dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex flex-wrap gap-2">
                  <span
                    *ngFor="
                      let country of singleGrant().eligibilities.countries
                    "
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                  >
                    {{ country }}
                  </span>
                </div>
              </dd>
            </div>

            <!-- Provinces -->
            <div
              *ngIf="singleGrant().eligibilities.provinces?.length"
              class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
            >
              <dt class="text-sm font-medium text-gray-500">
                Eligible Provinces
              </dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex flex-wrap gap-2">
                  <span
                    *ngFor="
                      let province of singleGrant().eligibilities.provinces
                    "
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                  >
                    {{ province }}
                  </span>
                </div>
              </dd>
            </div>

            <!-- Career Stages -->
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">Career Stages</dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <div class="flex flex-wrap gap-2">
                  <span
                    *ngFor="
                      let stage of singleGrant().eligibilities.careerStages
                    "
                    class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"
                  >
                    {{ stage }}
                  </span>
                </div>
              </dd>
            </div>

            <!-- General Eligibility -->
            <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
              <dt class="text-sm font-medium text-gray-500">
                General Eligibility
              </dt>
              <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                <ul class="list-disc pl-5 space-y-1">
                  <li *ngFor="let item of singleGrant().eligibilities.general">
                    {{ item }}
                  </li>
                </ul>
              </dd>
            </div>
          </dl>
        </div>
      </div>
    </div>
    <!-- Add grant by parameters section -->
    <div id="add-grant-by-parameters" class="max-w-9xl mx-auto mb-8 mt-8">
      <!-- Descriptive Information -->
      <div
        class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
      >
        <h2 class="text-xl font-semibold mb-2">Add grant by parameters</h2>
        <p class="text-gray-700 mb-2">
          Adds a new grant to the system by providing structured parameters
          including triggering the AI stack and Area of Research (AOR)
          attachment.
        </p>
        <div class="text-sm text-gray-600">
          <p>Endpoint: <span class="font-mono">POST /grant</span></p>
          <p>
            Endpoint sample:
            <a
              href="https://api.research.profoundimpact.com/v1/grant"
              class="text-indigo-600 hover:text-indigo-800"
              target="_blank"
              >https://api.research.profoundimpact.com/v1/grant</a
            >
          </p>
        </div>
      </div>

      <!-- Form Container -->
      <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
        <form
          [formGroup]="addGrantForm"
          class="space-y-6"
          (ngSubmit)="addGrantByParameters()"
        >
          <!-- Basic Information -->
          <div class="mb-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">
              Basic Information
            </h3>

            <!-- First row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="title"
                  class="block text-sm font-medium text-gray-700"
                  >Title *</label
                >
                <input
                  type="text"
                  id="title"
                  formControlName="title"
                  placeholder="Enter grant title"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="source"
                  class="block text-sm font-medium text-gray-700"
                  >Source *</label
                >
                <input
                  type="text"
                  id="source"
                  formControlName="source"
                  placeholder="Enter funding source"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Second row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
              <div class="space-y-2">
                <label
                  for="websiteLink"
                  class="block text-sm font-medium text-gray-700"
                  >Website Link</label
                >
                <input
                  type="text"
                  id="websiteLink"
                  formControlName="websiteLink"
                  placeholder="Enter website URL"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>

              <div class="space-y-2">
                <label
                  for="deadlineType"
                  class="block text-sm font-medium text-gray-700"
                  >Deadline Type *</label
                >
                <select
                  id="deadlineType"
                  formControlName="deadlineType"
                  (change)="onDeadlineTypeChange()"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                >
                  <option value="Regular">Regular</option>
                  <option value="Annual">Annual</option>
                  <option value="Continuous">Continuous</option>
                </select>
              </div>
            </div>

            <!-- Summary -->
            <div class="mt-4 space-y-2">
              <label
                for="summary"
                class="block text-sm font-medium text-gray-700"
                >Summary *</label
              >
              <textarea
                id="summary"
                formControlName="summary"
                placeholder="Enter grant summary"
                rows="3"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              ></textarea>
            </div>

            <!-- Public/Private toggle -->
            <div class="mt-4">
              <label class="inline-flex items-center">
                <input
                  type="checkbox"
                  formControlName="public"
                  class="form-checkbox h-4 w-4 text-indigo-600"
                />
                <span class="ml-2 text-sm text-gray-700"
                  >Make grant public</span
                >
              </label>
            </div>
          </div>

          <!-- Application Deadlines -->
          <div
            *ngIf="addGrantForm.get('deadlineType')?.value !== 'Continuous'"
            class="border-t border-gray-200 pt-4"
          >
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-medium text-gray-900">
                Application Deadlines
              </h3>
              <button
                type="button"
                (click)="addDeadline()"
                class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                <svg
                  class="h-4 w-4 mr-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
                Add Deadline
              </button>
            </div>

            <div formArrayName="applicationDeadlines" class="space-y-4">
              <div
                *ngFor="
                  let deadline of applicationDeadlinesArray.controls;
                  let i = index
                "
                [formGroupName]="i"
                class="p-4 border border-gray-200 rounded-md"
              >
                <div class="flex justify-between items-center mb-2">
                  <span class="font-medium">Deadline Set #{{ i + 1 }}</span>
                  <button
                    *ngIf="applicationDeadlinesArray.length > 1"
                    type="button"
                    (click)="removeDeadline(i)"
                    class="text-red-600 hover:text-red-800"
                  >
                    <svg
                      class="h-4 w-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      ></path>
                    </svg>
                  </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Application Deadline *</label
                    >
                    <input
                      type="date"
                      formControlName="applicationDeadline"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Registration of Intent Deadline</label
                    >
                    <input
                      type="date"
                      formControlName="registrationOfIntentDeadline"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Budget Information -->
          <div class="border-t border-gray-200 pt-4">
            <h3 class="text-lg font-medium text-gray-900 mb-4">
              Budget Information
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Budget</label
                >
                <input
                  type="number"
                  formControlName="budget"
                  placeholder="Enter budget amount"
                  min="0"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Award Amount</label
                >
                <input
                  type="number"
                  formControlName="awardAmount"
                  placeholder="Enter award amount"
                  min="0"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Currency</label
                >
                <select
                  formControlName="currencyCode"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                >
                  <option value="USD">USD</option>
                  <option value="CAD">CAD</option>
                  <option value="EUR">EUR</option>
                  <option value="GBP">GBP</option>
                </select>
              </div>
            </div>

            <div class="mt-4 space-y-2">
              <label class="block text-sm font-medium text-gray-700"
                >Budget Description</label
              >
              <textarea
                formControlName="budgetDescription"
                placeholder="Enter budget description"
                rows="2"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              ></textarea>
            </div>
          </div>

          <!-- Keywords -->
          <div class="border-t border-gray-200 pt-4">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-medium text-gray-900">Keywords</h3>
              <button
                type="button"
                (click)="addItemToArray('keywords')"
                class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                <svg
                  class="h-4 w-4 mr-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  ></path>
                </svg>
                Add Keyword
              </button>
            </div>

            <div formArrayName="keywords" class="space-y-2">
              <div
                *ngFor="let keyword of keywordsArray.controls; let i = index"
                class="flex space-x-2"
              >
                <input
                  [formControlName]="i"
                  placeholder="Enter keyword"
                  class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
                <button
                  *ngIf="keywordsArray.length > 1"
                  type="button"
                  (click)="removeItemFromArray('keywords', i)"
                  class="text-red-600 hover:text-red-800"
                >
                  <svg
                    class="h-5 w-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    ></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <!-- Eligibility Criteria -->
          <div class="border-t border-gray-200 pt-4">
            <h3 class="text-lg font-medium text-gray-900 mb-4">
              Eligibility Criteria
            </h3>

            <!-- Countries -->
            <div class="mb-4">
              <div class="flex justify-between items-center mb-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Eligible Countries</label
                >
                <button
                  type="button"
                  (click)="addItemToArray('eligibility_criteria_countries')"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Country
                </button>
              </div>

              <div
                formArrayName="eligibility_criteria_countries"
                class="space-y-2"
              >
                <div
                  *ngFor="let country of countriesArray.controls; let i = index"
                  class="flex space-x-2"
                >
                  <input
                    [formControlName]="i"
                    placeholder="Enter country name"
                    class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <button
                    *ngIf="countriesArray.length > 1"
                    type="button"
                    (click)="
                      removeItemFromArray('eligibility_criteria_countries', i)
                    "
                    class="text-red-600 hover:text-red-800"
                  >
                    <svg
                      class="h-5 w-5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Provinces -->
            <div class="mb-4">
              <div class="flex justify-between items-center mb-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Eligible Provinces</label
                >
                <button
                  type="button"
                  (click)="addItemToArray('eligibility_criteria_provinces')"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Province
                </button>
              </div>

              <div
                formArrayName="eligibility_criteria_provinces"
                class="space-y-2"
              >
                <div
                  *ngFor="
                    let province of provincesArray.controls;
                    let i = index
                  "
                  class="flex space-x-2"
                >
                  <input
                    [formControlName]="i"
                    placeholder="Enter province name"
                    class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <button
                    *ngIf="provincesArray.length > 1"
                    type="button"
                    (click)="
                      removeItemFromArray('eligibility_criteria_provinces', i)
                    "
                    class="text-red-600 hover:text-red-800"
                  >
                    <svg
                      class="h-5 w-5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- Career Stages -->
            <div class="mb-4">
              <div class="flex justify-between items-center mb-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Career Stages</label
                >
                <button
                  type="button"
                  (click)="addItemToArray('eligibility_criteria_careerStages')"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Career Stage
                </button>
              </div>

              <div
                formArrayName="eligibility_criteria_careerStages"
                class="space-y-2"
              >
                <div
                  *ngFor="
                    let stage of careerStagesArray.controls;
                    let i = index
                  "
                  class="flex space-x-2"
                >
                  <select
                    [formControlName]="i"
                    class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  >
                    <option value="">Select career stage</option>
                    <option
                      *ngFor="let stage of getUnusedCareerStages(i)"
                      [value]="stage"
                    >
                      {{ stage }}
                    </option>
                  </select>
                  <button
                    *ngIf="careerStagesArray.length > 1"
                    type="button"
                    (click)="
                      removeItemFromArray(
                        'eligibility_criteria_careerStages',
                        i
                      )
                    "
                    class="text-red-600 hover:text-red-800"
                  >
                    <svg
                      class="h-5 w-5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <!-- General Eligibility -->
            <div>
              <div class="flex justify-between items-center mb-2">
                <label class="block text-sm font-medium text-gray-700"
                  >General Eligibility Criteria</label
                >
                <button
                  type="button"
                  (click)="addItemToArray('eligibility_criteria_general')"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Criterion
                </button>
              </div>

              <div
                formArrayName="eligibility_criteria_general"
                class="space-y-2"
              >
                <div
                  *ngFor="
                    let criterion of generalEligibilityArray.controls;
                    let i = index
                  "
                  class="flex space-x-2"
                >
                  <input
                    [formControlName]="i"
                    placeholder="Enter eligibility criterion"
                    class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <button
                    *ngIf="generalEligibilityArray.length > 1"
                    type="button"
                    (click)="
                      removeItemFromArray('eligibility_criteria_general', i)
                    "
                    class="text-red-600 hover:text-red-800"
                  >
                    <svg
                      class="h-5 w-5"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Submit buttons -->
          <div class="flex justify-center gap-4 pt-4">
            <button
              type="submit"
              [disabled]="addGrantLoading() || addGrantForm.invalid"
              class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
            >
              <span *ngIf="addGrantLoading()">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Adding Grant...
              </span>
              <span *ngIf="!addGrantLoading()">Add Grant</span>
            </button>
            <button
              type="button"
              (click)="resetAddGrantForm()"
              class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              Reset Form
            </button>
          </div>
        </form>
      </div>

      <!-- Error message -->
      <div
        *ngIf="addGrantError()"
        class="bg-red-50 border-l-4 border-red-500 p-4 mb-6"
      >
        <div class="flex">
          <div class="flex-shrink-0">
            <svg
              class="h-5 w-5 text-red-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <div class="ml-3">
            <p class="text-sm text-red-700">{{ addGrantError() }}</p>
          </div>
        </div>
      </div>

      <!-- Success message -->
      <div
        *ngIf="addGrantSuccess()"
        class="bg-green-50 border-l-4 border-green-500 p-4 mb-6"
      >
        <div class="flex">
          <div class="flex-shrink-0">
            <svg
              class="h-5 w-5 text-green-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              />
            </svg>
          </div>
          <div class="ml-3">
            <p class="text-sm text-green-700">
              Grant added successfully! ID: {{ addGrantSuccess().grantId }}
              <span class="block mt-1 text-amber-600">
                <i class="fas fa-info-circle mr-1"></i>
                Note: AI processing is still running and will continue for
                approximately 10 minutes. You can check the grant details after
                processing is complete.
              </span>
            </p>
          </div>
        </div>
      </div>

      <!-- Result display -->
      <div
        *ngIf="addGrantSuccess()"
        class="bg-white shadow overflow-hidden sm:rounded-lg mb-8"
      >
        <!-- Full JSON Response -->
        <div class="px-4 py-5 sm:px-6 bg-indigo-50 mt-4">
          <h4 class="text-md leading-6 font-medium text-gray-900">
            Full API Response
          </h4>
        </div>
        <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
          <pre class="bg-gray-100 p-4 rounded overflow-auto text-sm">{{
            addGrantSuccess() | json
          }}</pre>
        </div>
      </div>
    </div>

    <!-- ! Get PDF Upload URL - Grant -->
    <div id="add-grant-by-pdf" class="max-w-9xl mx-auto mb-8 mt-8">
      <div
        class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
      >
        <h2 class="text-xl font-semibold mb-2">Add grant by PDF</h2>
        <p class="text-gray-700 mb-2">
          Adds a new grant to the system by providing structured parameters and
          a PDF file including triggering the AI stack and Area of Research
          (AOR) attachment. The PDF extraction and AI processing takes
          approximately 10 minutes to complete, during which the system
          retrieves and attaches relevant grant information.
        </p>
        <p class="text-gray-700 mb-2">
          Adding a grant by PDF includes 2 steps.
        </p>
        <h3 class="text-lg font-medium text-gray-900 mb-2">
          Step 1: Get PDF upload URL and file Id
        </h3>
        <p class="text-gray-700 mb-2">
          Retrieves a temporary URL and file ID to upload the PDF file
        </p>
        <div class="text-sm text-gray-600">
          <p>
            Endpoint: <span class="font-mono">GET /uploadURL/grant/pdf</span>
          </p>
          <p>
            Endpoint sample:
            <a
              href="https://api.research.profoundimpact.com/v1/uploadURL/grant/pdf"
              class="text-indigo-600 hover:text-indigo-800"
              target="_blank"
              >https://api.research.profoundimpact.com/v1/uploadURL/grant/pdf</a
            >
          </p>
        </div>
      </div>

      <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
        <!-- Combined file selection and upload -->
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Select and Upload PDF File
          </label>

          <div class="flex flex-col space-y-2 max-w-xs">
            <button
              (click)="fileInput.click()"
              [disabled]="uploadUrlLoading()"
              class="inline-flex items-center justify-center px-4 py-2.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors duration-150"
            >
              <svg
                *ngIf="!uploadUrlLoading() && !selectedGrantPdfFile"
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                ></path>
              </svg>

              <svg
                *ngIf="!uploadUrlLoading() && selectedGrantPdfFile"
                class="w-5 h-5 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                ></path>
              </svg>

              <svg
                *ngIf="uploadUrlLoading()"
                class="animate-spin -ml-1 mr-2 h-5 w-5"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>

              <span *ngIf="!uploadUrlLoading() && !selectedGrantPdfFile">
                Select & Upload PDF
              </span>
              <span
                *ngIf="!uploadUrlLoading() && selectedGrantPdfFile"
                class="truncate max-w-[180px]"
              >
                {{ selectedGrantPdfFile.name }}
              </span>
              <span *ngIf="uploadUrlLoading()"> Uploading... </span>
            </button>

            <!-- Hidden file input -->
            <input
              #fileInput
              type="file"
              id="grant-pdf-file"
              accept=".pdf"
              (change)="onFileSelectedAndUpload($event)"
              class="hidden"
            />

            <p class="text-xs text-gray-500">
              Click the button to select a PDF file. The file will be
              automatically uploaded once selected.
            </p>
          </div>
        </div>

        <!-- Display the URL when available -->
        <div *ngIf="uploadUrlResponse()" class="mt-4 p-4 bg-gray-50 rounded">
          <div class="mb-2">
            <p class="text-sm font-medium text-gray-900">Upload Status:</p>
            <p class="mt-1 text-sm text-green-500">
              <svg
                class="inline-block h-5 w-5 mr-1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd"
                />
              </svg>
              File uploaded successfully!
            </p>
          </div>
          <div>
            <p class="text-sm font-medium text-gray-900">File ID:</p>
            <p class="mt-1 text-sm text-gray-500">
              {{ uploadUrlResponse()?.fileId }}
            </p>
          </div>
          <div class="mt-4">
            <p class="text-sm text-gray-600">
              The file has been uploaded successfully. Please proceed to Step 2
              below to add the grant.
            </p>
          </div>
        </div>

        <!-- Display error if any -->
        <div
          *ngIf="uploadUrlError()"
          class="mt-4 p-4 bg-red-50 text-red-700 rounded"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-400"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm">{{ uploadUrlError() }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 2 Description -->
      <div
        *ngIf="uploadUrlResponse()"
        class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200 mt-8"
      >
        <h3 class="text-lg font-medium text-gray-900 mb-2">
          Step 2: Add grant by PDF file ID
        </h3>
        <p class="text-gray-700 mb-2">
          After successfully uploading the PDF file, use the returned file ID to
          add a new grant to the system.
        </p>
        <div class="text-sm text-gray-600">
          <p>Endpoint: <span class="font-mono">POST /grant/pdf</span></p>
          <p>
            Endpoint example:
            <a
              href="https://api.research.profoundimpact.com/v1/grant/pdf"
              class="text-indigo-600 hover:text-indigo-800"
              target="_blank"
              >https://api.research.profoundimpact.com/v1/grant/pdf</a
            >
          </p>
        </div>
      </div>

      <!-- Form Container -->
      <div
        *ngIf="uploadUrlResponse()"
        class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md"
      >
        <form
          [formGroup]="addGrantPdfForm"
          (ngSubmit)="addGrantByPdf()"
          class="space-y-6"
        >
          <!-- Basic Information -->
          <div class="mb-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">
              Basic Information
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="title"
                  class="block text-sm font-medium text-gray-700"
                  >Title *</label
                >
                <input
                  type="text"
                  id="title"
                  formControlName="title"
                  placeholder="Enter grant title"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="source"
                  class="block text-sm font-medium text-gray-700"
                  >Source *</label
                >
                <input
                  type="text"
                  id="source"
                  formControlName="source"
                  placeholder="Enter funding source"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
              <div class="space-y-2">
                <label
                  for="websiteLink"
                  class="block text-sm font-medium text-gray-700"
                  >Website Link</label
                >
                <input
                  type="text"
                  id="websiteLink"
                  formControlName="websiteLink"
                  placeholder="Enter website URL"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="pdfFileName"
                  class="block text-sm font-medium text-gray-700"
                  >PDF File Name</label
                >
                <input
                  type="text"
                  id="pdfFileName"
                  formControlName="pdfFileName"
                  placeholder="Enter PDF file name"
                  readonly
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="deadlineType"
                  class="block text-sm font-medium text-gray-700"
                  >Deadline Type</label
                >
                <select
                  id="deadlineType"
                  formControlName="deadlineType"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                >
                  <option value="Regular">Regular</option>
                  <option value="Annual">Annual</option>
                  <option value="Continuous">Continuous</option>
                </select>
              </div>
            </div>

            <!-- Public/Private toggle -->
            <div class="mt-4">
              <label class="inline-flex items-center">
                <input
                  type="checkbox"
                  formControlName="public"
                  class="form-checkbox h-4 w-4 text-indigo-600"
                />
                <span class="ml-2 text-sm text-gray-700"
                  >Make grant public</span
                >
              </label>
            </div>
          </div>

          <!-- Deadline Information -->
          <div
            class="border-t border-gray-200 pt-4"
            *ngIf="addGrantPdfForm.get('deadlineType')?.value !== 'Continuous'"
          >
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-medium text-gray-900">
                Application Deadlines
              </h3>
              <button
                type="button"
                (click)="addDeadlinePdf()"
                class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200"
              >
                <svg
                  class="h-4 w-4 mr-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                  />
                </svg>
                Add Deadline
              </button>
            </div>

            <div formArrayName="applicationDeadlines" class="space-y-4">
              <div
                *ngFor="
                  let deadline of getFormArrayByKey('applicationDeadlines')
                    .controls;
                  let i = index
                "
                [formGroupName]="i"
                class="p-4 border border-gray-200 rounded-md"
              >
                <div class="flex justify-between items-center mb-2">
                  <span class="font-medium">Deadline Set #{{ i + 1 }}</span>
                  <button
                    *ngIf="getFormArrayByKey('applicationDeadlines').length > 1"
                    type="button"
                    (click)="removeDeadlinePdf(i)"
                    class="text-red-600 hover:text-red-800"
                  >
                    <svg
                      class="h-4 w-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      />
                    </svg>
                  </button>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Application Deadline *</label
                    >
                    <input
                      type="date"
                      formControlName="applicationDeadline"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Registration of Intent Deadline</label
                    >
                    <input
                      type="date"
                      formControlName="registrationOfIntentDeadline"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Eligibility Criteria -->
          <div class="border-t border-gray-200 pt-4">
            <h3 class="text-lg font-medium text-gray-900 mb-4">
              Eligibility Criteria
            </h3>

            <!-- Countries and Provinces -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Eligible Countries</label
                >
                <div formArrayName="eligibility_criteria_countries">
                  <div
                    *ngFor="
                      let country of getFormArrayByKey(
                        'eligibility_criteria_countries'
                      ).controls;
                      let i = index
                    "
                    class="flex space-x-2 mt-2"
                  >
                    <input
                      [formControlName]="i"
                      placeholder="Enter country"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"
                    />
                    <button
                      type="button"
                      *ngIf="
                        getFormArrayByKey('eligibility_criteria_countries')
                          .length > 1
                      "
                      (click)="
                        removeItemFromPdfArray(
                          'eligibility_criteria_countries',
                          i
                        )
                      "
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        />
                      </svg>
                    </button>
                  </div>
                  <button
                    type="button"
                    (click)="
                      addItemToPdfArray('eligibility_criteria_countries')
                    "
                    class="mt-2 text-indigo-600 hover:text-indigo-800"
                  >
                    + Add Country
                  </button>
                </div>
              </div>

              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Eligible Provinces</label
                >
                <div formArrayName="eligibility_criteria_provinces">
                  <div
                    *ngFor="
                      let province of getFormArrayByKey(
                        'eligibility_criteria_provinces'
                      ).controls;
                      let i = index
                    "
                    class="flex space-x-2 mt-2"
                  >
                    <input
                      [formControlName]="i"
                      placeholder="Enter province"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"
                    />
                    <button
                      type="button"
                      *ngIf="
                        getFormArrayByKey('eligibility_criteria_provinces')
                          .length > 1
                      "
                      (click)="
                        removeItemFromPdfArray(
                          'eligibility_criteria_provinces',
                          i
                        )
                      "
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        />
                      </svg>
                    </button>
                  </div>
                  <button
                    type="button"
                    (click)="
                      addItemToPdfArray('eligibility_criteria_provinces')
                    "
                    class="mt-2 text-indigo-600 hover:text-indigo-800"
                  >
                    + Add Province
                  </button>
                </div>
              </div>
            </div>

            <!-- Career Stages and General Eligibility -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >Career Stages</label
                >
                <div formArrayName="eligibility_criteria_careerStages">
                  <div
                    *ngFor="
                      let stage of getFormArrayByKey(
                        'eligibility_criteria_careerStages'
                      ).controls;
                      let i = index
                    "
                    class="flex space-x-2 mt-2"
                  >
                    <select
                      [formControlName]="i"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"
                    >
                      <option value="">Select career stage</option>
                      <option
                        *ngFor="let stage of getUnusedCareerStages(i)"
                        [value]="stage"
                      >
                        {{ stage }}
                      </option>
                    </select>
                    <button
                      type="button"
                      *ngIf="
                        getFormArrayByKey('eligibility_criteria_careerStages')
                          .length > 1
                      "
                      (click)="
                        removeItemFromPdfArray(
                          'eligibility_criteria_careerStages',
                          i
                        )
                      "
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        />
                      </svg>
                    </button>
                  </div>
                  <button
                    type="button"
                    (click)="
                      addItemToPdfArray('eligibility_criteria_careerStages')
                    "
                    class="mt-2 text-indigo-600 hover:text-indigo-800"
                  >
                    + Add Career Stage
                  </button>
                </div>
              </div>

              <div class="space-y-2">
                <label class="block text-sm font-medium text-gray-700"
                  >General Eligibility</label
                >
                <div formArrayName="eligibility_criteria_general">
                  <div
                    *ngFor="
                      let criterion of getFormArrayByKey(
                        'eligibility_criteria_general'
                      ).controls;
                      let i = index
                    "
                    class="flex space-x-2 mt-2"
                  >
                    <input
                      [formControlName]="i"
                      placeholder="Enter eligibility criterion"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"
                    />
                    <button
                      type="button"
                      *ngIf="
                        getFormArrayByKey('eligibility_criteria_general')
                          .length > 1
                      "
                      (click)="
                        removeItemFromPdfArray(
                          'eligibility_criteria_general',
                          i
                        )
                      "
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        />
                      </svg>
                    </button>
                  </div>
                  <button
                    type="button"
                    (click)="addItemToPdfArray('eligibility_criteria_general')"
                    class="mt-2 text-indigo-600 hover:text-indigo-800"
                  >
                    + Add General Eligibility
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Submit buttons -->
          <div class="flex justify-center gap-4 pt-4">
            <button
              type="submit"
              [disabled]="addGrantPdfLoading() || addGrantPdfForm.invalid"
              class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
            >
              <span *ngIf="addGrantPdfLoading()">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Adding Grant...
              </span>
              <span *ngIf="!addGrantPdfLoading()">Add Grant with PDF</span>
            </button>
            <button
              type="button"
              (click)="resetAddGrantPdfForm()"
              class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              Reset Form
            </button>
          </div>
        </form>

        <!-- Error message -->
        <div
          *ngIf="addGrantPdfError()"
          class="mt-4 p-4 bg-red-50 border-l-4 border-red-500"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-700">{{ addGrantPdfError() }}</p>
            </div>
          </div>
        </div>

        <!-- Success message -->
        <div
          *ngIf="addGrantPdfSuccess()"
          class="mt-6 p-4 bg-green-50 rounded-md"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-green-400"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <h3 class="text-sm font-medium text-green-800">Success!</h3>
              <div class="mt-2 text-sm text-green-700">
                <p>{{ addGrantPdfSuccess().message }}</p>
                <p class="mt-1">Grant ID: {{ addGrantPdfSuccess().grantId }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="search-projects">
      <!-- Add the descriptive information here -->
      <div
        class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
      >
        <h2 class="text-xl font-semibold mb-2">Search projects</h2>
        <p class="text-gray-700 mb-2">
          Retrieves detailed information about projects using filters as
          parameters. The search parameters can be multiple. Values in each
          field use "OR" logic, except between keys, which use "AND" logic.
        </p>
        <div class="text-sm text-gray-600">
          <p>Endpoint: <span class="font-mono">POST /project/search</span></p>
          <p>
            Endpoint sample:
            <a
              href="https://api.research.profoundimpact.com/v1/project/search"
              class="text-indigo-600 hover:text-indigo-800"
              target="_blank"
              >https://api.research.profoundimpact.com/v1/project/search</a
            >
          </p>
        </div>
      </div>

      <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
        <form
          [formGroup]="projectSearchForm"
          class="space-y-6"
          (ngSubmit)="searchForProjects()"
        >
          <!-- First row -->
          <div>use semicolon (;) to enter multiple search phrases</div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="titles"
                class="block text-sm font-medium text-gray-700"
                >Titles:
              </label>
              <input
                type="text"
                id="titles"
                formControlName="titles"
                placeholder="Enter project titles"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <div class="space-y-2">
              <label
                for="organizations"
                class="block text-sm font-medium text-gray-700"
                >Organizations:</label
              >
              <input
                type="text"
                id="organizations"
                formControlName="organizations"
                placeholder="Enter organization names"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Second row -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="keywords"
                class="block text-sm font-medium text-gray-700"
                >Keywords:</label
              >
              <input
                type="text"
                id="keywords"
                formControlName="keywords"
                placeholder="Enter relevant keywords"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <div class="space-y-2">
              <label
                for="areaOfResearches"
                class="block text-sm font-medium text-gray-700"
                >Area of research:</label
              >
              <input
                type="text"
                id="areaOfResearches"
                formControlName="areaOfResearches"
                placeholder="Enter area of research"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Third row -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="space-y-2">
              <label
                for="disciplines"
                class="block text-sm font-medium text-gray-700"
                >Disciplines:</label
              >
              <input
                type="text"
                id="disciplines"
                formControlName="disciplines"
                placeholder="Enter disciplines"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
          </div>

          <!-- Submit button with loading state -->
          <div class="flex justify-center gap-4">
            <button
              type="submit"
              [disabled]="isLoading()"
              class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
            >
              <span *ngIf="isLoading()">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Searching...
              </span>
              <span *ngIf="!isLoading()">Filter Projects</span>
            </button>
            <button
              type="button"
              (click)="resetProjectForm()"
              class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              Reset
            </button>
          </div>
        </form>
      </div>

      <!-- Project List Table -->
      <div class="max-w-9xl mx-auto mt-8">
        <h2 class="text-xl font-semibold mb-4">Search project results</h2>

        <!-- Show loading spinner while fetching results -->
        <div *ngIf="isLoading()" class="flex justify-center py-8">
          <svg
            class="animate-spin h-10 w-10 text-indigo-600"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
        </div>

        <!-- Desktop Table View (hidden on small screens) -->
        <div
          *ngIf="!isLoading() && projects().length > 0"
          class="hidden md:block overflow-x-auto rounded-lg border border-gray-200 shadow-md"
        >
          <table
            class="min-w-full divide-y divide-gray-200 table-fixed w-full max-w-full"
          >
            <thead class="bg-gray-50">
              <tr>
                <th
                  scope="col"
                  class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  ID
                </th>
                <th
                  scope="col"
                  class="w-1/3 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Title
                </th>
                <!-- <th
                  scope="col"
                  class="w-1/6 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                >
                  Source
                </th> -->
                <th
                  scope="col"
                  class="w-20 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Status
                </th>
                <th
                  scope="col"
                  class="w-24 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                >
                  Length
                </th>
                <th
                  scope="col"
                  class="w-32 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider xl:table-cell hidden"
                >
                  Organization
                </th>
                <th
                  scope="col"
                  class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr *ngFor="let project of projects()" class="hover:bg-gray-50">
                <td class="px-2 sm:px-4 py-2 text-sm font-medium text-gray-900">
                  {{ project.id }}
                </td>
                <td class="px-2 sm:px-4 py-3 text-sm text-gray-900">
                  <div class="line-clamp-5" [title]="project.title">
                    {{ project.title }}
                    <!-- Add badges for isArchived and isContinuous -->
                    <div class="mt-1 flex flex-wrap gap-1">
                      <span
                        *ngIf="project.isArchived"
                        class="inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-gray-100 text-gray-800"
                      >
                        Archived
                      </span>
                      <span
                        *ngIf="project.isContinuous"
                        class="inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-blue-100 text-blue-800"
                      >
                        Continuous
                      </span>
                    </div>
                  </div>
                </td>

                <!-- <td
                  class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                >
                  <div class="truncate" [title]="project.source">
                    {{ project.source }}
                  </div>
                </td> -->
                <td class="px-2 sm:px-4 py-2 text-sm">
                  <span
                    [ngClass]="{
                      'px-2 py-0.5 text-xs font-semibold rounded-full': true,
                      'bg-green-100 text-green-800': project.status === 'Open',
                      'bg-red-100 text-red-800': project.status === 'Closed',
                      'bg-yellow-100 text-yellow-800':
                        project.status !== 'Open' && project.status !== 'Closed'
                    }"
                  >
                    {{ project.status }}
                  </span>
                </td>
                <td
                  class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                >
                  {{ project.length }}
                </td>
                <td
                  class="px-2 sm:px-4 py-2 text-sm text-gray-500 xl:table-cell hidden"
                >
                  <!-- Modified to make organization a clickable link if organizationUrl exists -->

                  <span *ngIf="project.organization">{{
                    project.organization
                  }}</span>
                </td>
                <td class="px-2 sm:px-4 py-2 text-sm">
                  <div class="flex space-x-1">
                    <!-- Updated to use websiteLink instead of url -->
                    <a
                      *ngIf="project.websiteLink"
                      [href]="project.websiteLink"
                      target="_blank"
                      class="text-indigo-600 hover:text-indigo-900"
                      title="Visit website"
                    >
                      <span class="sr-only">Website</span>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                    </a>
                    <!-- Added organization link icon if it exists but is different from website -->
                    <a
                      *ngIf="
                        project.organizationUrl &&
                        project.organizationUrl !== project.websiteLink
                      "
                      [href]="project.organizationUrl"
                      target="_blank"
                      class="text-indigo-600 hover:text-indigo-900"
                      title="Visit organization website"
                    >
                      <span class="sr-only">Organization</span>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                        />
                      </svg>
                    </a>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Mobile Card View -->
        <div
          *ngIf="!isLoading() && projects().length > 0"
          class="md:hidden space-y-4"
        >
          <div
            *ngFor="let project of projects()"
            class="bg-white rounded-lg shadow border border-gray-200 p-4"
          >
            <div class="flex justify-between items-start">
              <div>
                <h3 class="font-medium text-gray-900">{{ project.title }}</h3>
                <!-- Add badges for isArchived and isContinuous in mobile view -->
                <div class="mt-1 flex flex-wrap gap-1">
                  <span
                    *ngIf="project.isArchived"
                    class="inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-gray-100 text-gray-800"
                  >
                    Archived
                  </span>
                  <span
                    *ngIf="project.isContinuous"
                    class="inline-flex items-center px-2 py-0.5 text-xs font-medium rounded bg-blue-100 text-blue-800"
                  >
                    Continuous
                  </span>
                </div>
              </div>
              <span
                [ngClass]="{
                  'px-2 py-1 text-xs font-semibold rounded-full': true,
                  'bg-green-100 text-green-800': project.status === 'Open',
                  'bg-red-100 text-red-800': project.status === 'Closed',
                  'bg-yellow-100 text-yellow-800':
                    project.status !== 'Open' && project.status !== 'Closed'
                }"
              >
                {{ project.status }}
              </span>
            </div>

            <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
              <div>
                <span class="text-gray-500">ID:</span>
                <span class="font-medium ml-1">{{ project.id }}</span>
              </div>
              <div>
                <span class="text-gray-500">Length:</span>
                <span class="font-medium ml-1">{{ project.length }}</span>
              </div>
              <div class="col-span-2">
                <span class="text-gray-500">Source:</span>
                <span class="font-medium ml-1">{{ project.source }}</span>
              </div>
              <div class="col-span-2">
                <span class="text-gray-500">Organization:</span>
                <!-- Modified to make organization a clickable link if organizationUrl exists -->
                <span *ngIf="project.organizationUrl">
                  {{ project.organization }}
                </span>
                <span *ngIf="!project.organizationUrl" class="font-medium ml-1">
                  {{ project.organization }}
                </span>
              </div>
              <div *ngIf="project.location" class="col-span-2">
                <span class="text-gray-500">Location:</span>
                <span class="font-medium ml-1">{{ project.location }}</span>
              </div>
            </div>

            <div
              class="mt-3 pt-3 border-t border-gray-100 flex justify-end space-x-4"
            >
              <!-- Updated to use websiteLink instead of url -->
              <a
                *ngIf="project.websiteLink"
                [href]="project.websiteLink"
                target="_blank"
                class="text-indigo-600 hover:text-indigo-900 flex items-center text-sm"
              >
                Visit website
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 ml-1"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                  />
                </svg>
              </a>
              <!-- Added organization link if it exists but is different from website -->
              <a
                *ngIf="
                  project.organizationUrl &&
                  project.organizationUrl !== project.websiteLink
                "
                [href]="project.organizationUrl"
                target="_blank"
                class="text-indigo-600 hover:text-indigo-900 flex items-center text-sm"
              >
                Visit organization
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4 ml-1"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                  />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div id="get-a-single-project" class="max-w-9xl mx-auto mb-8 mt-8">
        <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 mb-4">
          <h2 class="text-xl font-semibold mb-2">Get a single project</h2>
          <p class="text-gray-700 mb-2">
            Retrieves detailed information about a specific project using its
            unique identifier.
          </p>
          <div class="text-sm text-gray-600">
            <p>
              Endpoint: <span class="font-mono">GET /project/{{'{{id}}'}}</span>
            </p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/project/342"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/project/342</a
              >
            </p>
          </div>
        </div>

        <!-- Input for project ID and fetch button -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
          <div class="flex items-end space-x-4">
            <div class="flex-grow">
              <label
                for="projectId"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Project ID:</label
              >
              <input
                type="number"
                id="projectId"
                #projectIdInput
                placeholder="Enter project ID"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <button
              (click)="getSingleProject(projectIdInput.value)"
              class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              <span *ngIf="!singleProjectLoading()">Fetch Project</span>
              <span *ngIf="singleProjectLoading()" class="flex items-center">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Loading...
              </span>
            </button>
          </div>
        </div>

        <!-- Error message -->
        <div
          *ngIf="singleProjectError()"
          class="bg-red-50 border-l-4 border-red-500 p-4 mb-6"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-700">{{ singleProjectError() }}</p>
            </div>
          </div>
        </div>

        <!-- Project details display -->
        <div
          *ngIf="singleProject() && !singleProjectLoading()"
          class="bg-white shadow overflow-hidden sm:rounded-lg mb-8"
        >
          <!-- Header -->
          <div
            class="px-4 py-5 sm:px-6 bg-indigo-50 flex justify-between items-start"
          >
            <div>
              <h3 class="text-lg leading-6 font-medium text-gray-900">
                Project #{{ singleProject().id }}
              </h3>
              <p class="mt-1 max-w-2xl text-sm text-gray-500">
                Created: {{ singleProject().createdDateTime }}
              </p>
              <!-- Add badges for status, isArchived and isContinuous -->
              <div class="mt-2 flex flex-wrap gap-2">
                <span
                  [ngClass]="{
                    'px-2 py-0.5 text-xs font-semibold rounded-full': true,
                    'bg-green-100 text-green-800':
                      singleProject().status === 'Open',
                    'bg-red-100 text-red-800':
                      singleProject().status === 'Closed',
                    'bg-yellow-100 text-yellow-800':
                      singleProject().status !== 'Open' &&
                      singleProject().status !== 'Closed'
                  }"
                >
                  {{ singleProject().status }}
                </span>
                <span
                  *ngIf="singleProject().isArchived"
                  class="px-2 py-0.5 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"
                >
                  Archived
                </span>
                <span
                  *ngIf="singleProject().isContinuous"
                  class="px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"
                >
                  Continuous
                </span>
              </div>
            </div>
          </div>

          <!-- Basic Information -->
          <div class="border-t border-gray-200">
            <dl>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Title</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().title }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Organization</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().organization || "Not specified" }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Length</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().length || "Not specified" }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Website</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <a
                    *ngIf="singleProject().websiteLink"
                    [href]="singleProject().websiteLink"
                    target="_blank"
                    class="text-indigo-600 hover:text-indigo-900"
                  >
                    {{ singleProject().websiteLink }}
                  </a>
                  <span *ngIf="!singleProject().websiteLink"
                    >Not available</span
                  >
                </dd>
              </div>
              <!-- <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Summary</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().summary || "No summary available" }}
                </dd>
              </div> -->
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Scope</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().scope || "No scope available" }}
                </dd>
              </div>
            </dl>
          </div>

          <!-- Project Dates -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Project Dates
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
            <dl class="sm:divide-y sm:divide-gray-200">
              <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Start Date</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <div *ngIf="singleProject().startYear">
                    {{ singleProject().startYear }}-{{
                      singleProject().startMonth
                    }}-{{ singleProject().startDay }}
                  </div>
                  <div *ngIf="!singleProject().startYear">Not specified</div>
                </dd>
              </div>
              <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">End Date</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <div *ngIf="singleProject().endYear">
                    {{ singleProject().endYear }}-{{
                      singleProject().endMonth
                    }}-{{ singleProject().endDay }}
                  </div>
                  <div *ngIf="!singleProject().endYear">
                    <span *ngIf="singleProject().isContinuous">Continuous</span>
                    <span *ngIf="!singleProject().isContinuous"
                      >Not specified</span
                    >
                  </div>
                </dd>
              </div>
              <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Location</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <div>
                    <span *ngIf="singleProject().city"
                      >{{ singleProject().city }},
                    </span>
                    <span *ngIf="singleProject().state"
                      >{{ singleProject().state }},
                    </span>
                    <span *ngIf="singleProject().country">{{
                      singleProject().country
                    }}</span>
                    <span
                      *ngIf="
                        !singleProject().city &&
                        !singleProject().state &&
                        !singleProject().country
                      "
                      >Not specified</span
                    >
                  </div>
                </dd>
              </div>
            </dl>
          </div>

          <!-- Keywords -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Keywords
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let keyword of singleProject().keywords"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800"
              >
                {{ keyword }}
              </span>
              <span
                *ngIf="
                  !singleProject().keywords ||
                  singleProject().keywords.length === 0
                "
                class="text-gray-500"
                >No keywords available</span
              >
            </div>
          </div>
          <!-- Areas of Research -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Areas of Research
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let aor of singleProject().areaOfResearches"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"
              >
                {{ aor }}
              </span>
              <span
                *ngIf="
                  !singleProject().areaOfResearches ||
                  singleProject().areaOfResearches.length === 0
                "
                class="text-gray-500"
                >No areas of research available</span
              >
            </div>
          </div>

          <!-- Disciplines -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Disciplines
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let discipline of singleProject().disciplines"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"
              >
                {{ discipline }}
              </span>
              <span
                *ngIf="
                  !singleProject().disciplines ||
                  singleProject().disciplines.length === 0
                "
                class="text-gray-500"
                >No disciplines available</span
              >
            </div>
          </div>

          <!-- Additional Information -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Additional Information
            </h3>
          </div>
          <div class="border-t border-gray-200">
            <dl>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">
                  Organization URL
                </dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <a
                    *ngIf="singleProject().organizationUrl"
                    [href]="singleProject().organizationUrl"
                    target="_blank"
                    class="text-indigo-600 hover:text-indigo-900"
                  >
                    {{ singleProject().organizationUrl }}
                  </a>
                  <span *ngIf="!singleProject().organizationUrl"
                    >Not available</span
                  >
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Public</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().public ? "Yes" : "No" }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Archived</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().isArchived ? "Yes" : "No" }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Continuous</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().isContinuous ? "Yes" : "No" }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Created By</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleProject().createdBy || "Unknown" }}
                </dd>
              </div>
            </dl>
          </div>

          <!-- Visit Website Button -->
          <div class="px-4 py-5 sm:px-6 flex justify-end">
            <a
              *ngIf="singleProject().websiteLink"
              [href]="singleProject().websiteLink"
              target="_blank"
              class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              Visit Project Website
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 ml-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
      <!-- Add project by parameters section -->
      <div id="add-project-by-parameters" class="max-w-9xl mx-auto mb-8 mt-8">
        <!-- Descriptive Information -->
        <div
          class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <h2 class="text-xl font-semibold mb-2">Add project by parameters</h2>
          <p class="text-gray-700 mb-2">
            Adds a new project to the system by providing structured parameters
            including triggering the AI stack and Area of Research (AOR)
            attachment.
          </p>
          <div class="text-sm text-gray-600">
            <p>Endpoint: <span class="font-mono">POST /project</span></p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/project"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/project</a
              >
            </p>
          </div>
        </div>

        <!-- Form Container -->
        <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
          <form
            [formGroup]="addProjectForm"
            class="space-y-6"
            (ngSubmit)="addProjectByParameters()"
          >
            <!-- Basic Information -->
            <div class="mb-6">
              <h3 class="text-lg font-medium text-gray-900 mb-4">
                Basic Information
              </h3>

              <!-- First row -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                  <label
                    for="project-title"
                    class="block text-sm font-medium text-gray-700"
                    >Title *</label
                  >
                  <input
                    type="text"
                    id="project-title"
                    formControlName="title"
                    placeholder="Enter project title"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="project-websiteLink"
                    class="block text-sm font-medium text-gray-700"
                    >Website Link</label
                  >
                  <input
                    type="text"
                    id="project-websiteLink"
                    formControlName="websiteLink"
                    placeholder="Enter website URL"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <!-- Second row -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="space-y-2">
                  <label
                    for="project-length"
                    class="block text-sm font-medium text-gray-700"
                    >Project Length</label
                  >
                  <input
                    type="text"
                    id="project-length"
                    formControlName="length"
                    placeholder="e.g., 6 months, 2 years"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <!-- <div class="space-y-2">
                  <label
                    for="project-scope"
                    class="block text-sm font-medium text-gray-700"
                    >Project Scope</label
                  >
                  <input
                    type="text"
                    id="project-scope"
                    formControlName="scope"
                    placeholder="Enter project scope"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div> -->
              </div>

              <!-- Scope -->
              <div class="mt-4 space-y-2">
                <label
                  for="project-scope"
                  class="block text-sm font-medium text-gray-700"
                  >Project Scope *</label
                >
                <textarea
                  id="project-scope"
                  formControlName="scope"
                  placeholder="Enter project scope"
                  rows="3"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                ></textarea>
              </div>

              <!-- Public/Private toggle -->
              <div class="mt-4">
                <label class="inline-flex items-center">
                  <input
                    type="checkbox"
                    formControlName="public"
                    class="form-checkbox h-4 w-4 text-indigo-600"
                  />
                  <span class="ml-2 text-sm text-gray-700"
                    >Make project public</span
                  >
                </label>
              </div>
            </div>

            <!-- Project Timeline -->
            <div class="border-t border-gray-200 pt-4">
              <h3 class="text-lg font-medium text-gray-900 mb-4">
                Project Timeline
              </h3>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Start Date</label
                  >
                  <input
                    type="date"
                    [value]="
                      formatProjectDate(
                        addProjectForm.get('startYear')?.value,
                        addProjectForm.get('startMonth')?.value,
                        addProjectForm.get('startDay')?.value
                      )
                    "
                    (change)="updateProjectStartDate($event)"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>

                <div
                  class="space-y-2"
                  *ngIf="!addProjectForm.get('isContinuous')?.value"
                >
                  <label class="block text-sm font-medium text-gray-700"
                    >End Date</label
                  >
                  <input
                    type="date"
                    [value]="
                      formatProjectDate(
                        addProjectForm.get('endYear')?.value,
                        addProjectForm.get('endMonth')?.value,
                        addProjectForm.get('endDay')?.value
                      )
                    "
                    (change)="updateProjectEndDate($event)"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <div class="mt-4">
                <label class="inline-flex items-center">
                  <input
                    type="checkbox"
                    formControlName="isContinuous"
                    class="form-checkbox h-4 w-4 text-indigo-600"
                  />
                  <span class="ml-2 text-sm text-gray-700"
                    >This project is ongoing</span
                  >
                </label>
              </div>
            </div>

            <!-- Organization Information -->
            <div class="border-t border-gray-200 pt-4">
              <h3 class="text-lg font-medium text-gray-900 mb-4">
                Organization Information
              </h3>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Organization Name</label
                  >
                  <input
                    type="text"
                    formControlName="organization"
                    placeholder="Enter organization name"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Organization Website</label
                  >
                  <input
                    type="url"
                    formControlName="organizationUrl"
                    placeholder="https://organization.com"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Organization LinkedIn</label
                  >
                  <input
                    type="url"
                    formControlName="organizationLinkedinUrl"
                    placeholder="https://linkedin.com/company/..."
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>
            </div>

            <!-- Location Information -->
            <div class="border-t border-gray-200 pt-4">
              <h3 class="text-lg font-medium text-gray-900 mb-4">
                Location Information
              </h3>

              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >City</label
                  >
                  <input
                    type="text"
                    formControlName="city"
                    placeholder="Enter city"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >State/Province</label
                  >
                  <input
                    type="text"
                    formControlName="state"
                    placeholder="Enter state or province"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Country</label
                  >
                  <input
                    type="text"
                    formControlName="country"
                    placeholder="Enter country"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>
            </div>

            <!-- Keywords -->
            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Keywords</h3>
                <button
                  type="button"
                  (click)="addProjectKeyword()"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                  Add Keyword
                </button>
              </div>

              <div
                formArrayName="keywords"
                *ngFor="
                  let keyword of projectKeywordsArray.controls;
                  let i = index
                "
                class="flex items-center mb-2"
              >
                <input
                  [formControlName]="i"
                  type="text"
                  placeholder="Enter keyword"
                  class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
                <button
                  type="button"
                  (click)="removeProjectKeyword(i)"
                  class="ml-2 inline-flex items-center p-1 border border-transparent rounded-full text-red-600 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                  [disabled]="projectKeywordsArray.controls.length <= 1"
                >
                  <svg
                    class="h-5 w-5"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Submit buttons -->
            <div class="flex justify-center gap-4 pt-4">
              <button
                type="submit"
                [disabled]="addProjectLoading() || addProjectForm.invalid"
                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
              >
                <span *ngIf="addProjectLoading()">
                  <svg
                    class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      class="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      stroke-width="4"
                    ></circle>
                    <path
                      class="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Adding Project...
                </span>
                <span *ngIf="!addProjectLoading()">Add Project</span>
              </button>
              <button
                type="button"
                (click)="resetAddProjectForm()"
                class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                Reset Form
              </button>
            </div>
          </form>
        </div>

        <!-- Error message -->
        <div
          *ngIf="addProjectError()"
          class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 mt-4"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-700">{{ addProjectError() }}</p>
            </div>
          </div>
        </div>

        <!-- Success message -->
        <div
          *ngIf="addProjectSuccess()"
          class="bg-green-50 border-l-4 border-green-500 p-4 mb-6 mt-4"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-green-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-green-700">
                Project added successfully! ID:
                {{ addProjectSuccess().projectId }}
                <span class="block mt-1 text-amber-600">
                  <i class="fas fa-info-circle mr-1"></i>
                  Note: AI processing is still running and will continue for
                  approximately 10 minutes. You can check the project details
                  after processing is complete.
                </span>
              </p>
            </div>
          </div>
        </div>

        <!-- Result display -->
        <div
          *ngIf="addProjectSuccess()"
          class="bg-white shadow overflow-hidden sm:rounded-lg mb-8 mt-4"
        >
          <!-- Full JSON Response -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h4 class="text-md leading-6 font-medium text-gray-900">
              Full API Response
            </h4>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <pre class="bg-gray-100 p-4 rounded overflow-auto text-sm">{{
              addProjectSuccess() | json
            }}</pre>
          </div>
        </div>
      </div>

      <!-- Search researchers -->
      <div id="search-researchers" class="max-w-9xl mx-auto mb-8 mt-8">
        <!-- Add the descriptive information here -->
        <div
          class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <h2 class="text-xl font-semibold mb-2">Search researchers</h2>
          <p class="text-gray-700 mb-2">
            Retrieves detailed information about researchers using filters as
            parameters. The search parameters can be multiple. Values in each
            field use "OR" logic, except between keys, which use "AND" logic.
          </p>
          <div class="text-sm text-gray-600">
            <p>
              Endpoint: <span class="font-mono">POST /researcher/search</span>
            </p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/researcher/search"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/researcher/search</a
              >
            </p>
          </div>
        </div>

        <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
          <form
            [formGroup]="researcherSearchForm"
            class="space-y-6"
            (ngSubmit)="searchForResearchers()"
          >
            <!-- First row -->
            <div>use semicolon (;) to enter multiple search phrases</div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="names"
                  class="block text-sm font-medium text-gray-700"
                  >Names:
                </label>
                <input
                  type="text"
                  id="names"
                  formControlName="names"
                  placeholder="Enter researcher names"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="faculties"
                  class="block text-sm font-medium text-gray-700"
                  >Faculties:</label
                >
                <input
                  type="text"
                  id="faculties"
                  formControlName="faculties"
                  placeholder="Enter faculties"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Second row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="keywords"
                  class="block text-sm font-medium text-gray-700"
                  >Keywords:</label
                >
                <input
                  type="text"
                  id="keywords"
                  formControlName="keywords"
                  placeholder="Enter keywords"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="areaOfResearches"
                  class="block text-sm font-medium text-gray-700"
                  >Area of research:</label
                >
                <input
                  type="text"
                  id="areaOfResearches"
                  formControlName="areaOfResearches"
                  placeholder="Enter area of research"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Third row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="disciplines"
                  class="block text-sm font-medium text-gray-700"
                  >Disciplines:</label
                >
                <input
                  type="text"
                  id="disciplines"
                  formControlName="disciplines"
                  placeholder="Enter disciplines"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Submit button with loading state -->
            <div class="flex justify-center gap-4">
              <button
                type="submit"
                [disabled]="researcherLoading()"
                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
              >
                <span *ngIf="researcherLoading()">
                  <svg
                    class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      class="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      stroke-width="4"
                    ></circle>
                    <path
                      class="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Searching...
                </span>
                <span *ngIf="!researcherLoading()">Search Researchers</span>
              </button>
              <button
                type="button"
                (click)="resetResearcherForm()"
                class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                Reset
              </button>
            </div>
          </form>
        </div>

        <!-- Researcher List Table -->
        <div class="max-w-9xl mx-auto mt-8">
          <h2 class="text-xl font-semibold mb-4">Search researcher results</h2>

          <!-- Show loading spinner while fetching results -->
          <div *ngIf="researcherLoading()" class="flex justify-center py-8">
            <svg
              class="animate-spin h-10 w-10 text-indigo-600"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
          </div>

          <!-- Display error message if any -->
          <div
            *ngIf="researcherError()"
            class="bg-red-50 border-l-4 border-red-500 p-4 mb-4"
          >
            <div class="flex">
              <div class="flex-shrink-0">
                <svg
                  class="h-5 w-5 text-red-500"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>
              <div class="ml-3">
                <p class="text-sm text-red-700">{{ researcherError() }}</p>
              </div>
            </div>
          </div>

          <!-- Desktop Table View (hidden on small screens) -->
          <div
            *ngIf="!researcherLoading() && researchers().length > 0"
            class="hidden md:block overflow-x-auto rounded-lg border border-gray-200 shadow-md"
          >
            <table
              class="min-w-full divide-y divide-gray-200 table-fixed w-full max-w-full"
            >
              <thead class="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    ID
                  </th>
                  <th
                    scope="col"
                    class="w-1/4 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Name
                  </th>
                  <th
                    scope="col"
                    class="w-1/4 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Email
                  </th>
                  <th
                    scope="col"
                    class="w-1/6 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Faculty
                  </th>
                  <th
                    scope="col"
                    class="w-1/6 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Program
                  </th>
                  <th
                    scope="col"
                    class="w-1/6 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Role
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr
                  *ngFor="let researcher of researchers()"
                  class="hover:bg-gray-50"
                >
                  <td
                    class="px-2 sm:px-4 py-2 text-sm font-medium text-gray-900"
                  >
                    {{ researcher.id }}
                  </td>
                  <td class="px-2 sm:px-4 py-3 text-sm text-gray-900">
                    <div class="flex items-center">
                      <div>
                        <div class="font-medium">
                          {{ researcher.title ? researcher.title + " " : ""
                          }}{{ researcher.firstName }} {{ researcher.lastName }}
                        </div>
                      </div>
                    </div>
                  </td>
                  <td class="px-2 sm:px-4 py-2 text-sm text-gray-500">
                    {{ researcher.email }}
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ researcher.faculty }}
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ researcher.program }}
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ researcher.role }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Mobile Card View -->
          <div
            *ngIf="!researcherLoading() && researchers().length > 0"
            class="md:hidden space-y-4"
          >
            <div
              *ngFor="let researcher of researchers()"
              class="bg-white rounded-lg shadow border border-gray-200 p-4"
            >
              <div class="flex justify-between items-start">
                <h3 class="font-medium text-gray-900">
                  {{ researcher.title ? researcher.title + " " : ""
                  }}{{ researcher.firstName }} {{ researcher.lastName }}
                </h3>
                <span class="text-xs text-gray-500"
                  >ID: {{ researcher.id }}</span
                >
              </div>

              <div class="mt-3 grid grid-cols-1 gap-2 text-sm">
                <div>
                  <span class="text-gray-500">Email:</span>
                  <span class="font-medium ml-1">{{ researcher.email }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Faculty:</span>
                  <span class="font-medium ml-1">{{ researcher.faculty }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Program:</span>
                  <span class="font-medium ml-1">{{ researcher.program }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Role:</span>
                  <span class="font-medium ml-1">{{ researcher.role }}</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Empty state if no researchers -->
          <div
            *ngIf="
              !researcherLoading() &&
              researchers().length === 0 &&
              !researcherError()
            "
            class="bg-white rounded-lg shadow-md border border-gray-200 p-6"
          >
            <div class="flex flex-col items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-10 w-10 text-gray-400 mb-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <p class="text-center text-gray-500">
                No researchers found matching your filters.
              </p>
              <p class="mt-1 text-center text-gray-500">
                Try adjusting your search criteria.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div id="get-a-single-researcher" class="max-w-9xl mx-auto mb-8 mt-8">
        <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 mb-4">
          <h2 class="text-xl font-semibold mb-2">Get a single researcher</h2>
          <p class="text-gray-700 mb-2">
            Retrieves detailed information about a specific researcher using its
            unique identifier.
          </p>
          <div class="text-sm text-gray-600">
            <p>
              Endpoint:
              <span class="font-mono">GET /researcher/{{'{{id}}'}}</span>
            </p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/researcher/2766"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/researcher/2766</a
              >
            </p>
          </div>
        </div>

        <!-- Input for researcher ID and fetch button -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
          <div class="flex items-end space-x-4">
            <div class="flex-grow">
              <label
                for="researcherId"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Researcher ID:</label
              >
              <input
                type="number"
                id="researcherId"
                #researcherIdInput
                placeholder="Enter researcher ID"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
            </div>
            <button
              (click)="getSingleResearcher(researcherIdInput.value)"
              class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              <span *ngIf="!singleResearcherLoading()">Fetch Researcher</span>
              <span *ngIf="singleResearcherLoading()" class="flex items-center">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Loading...
              </span>
            </button>
          </div>
        </div>

        <!-- Error message -->
        <div
          *ngIf="singleResearcherError()"
          class="bg-red-50 border-l-4 border-red-500 p-4 mb-6"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-700">{{ singleResearcherError() }}</p>
            </div>
          </div>
        </div>

        <!-- Researcher details display -->
        <div
          *ngIf="singleResearcher() && !singleResearcherLoading()"
          class="bg-white shadow overflow-hidden sm:rounded-lg mb-8"
        >
          <!-- Header -->
          <div
            class="px-4 py-5 sm:px-6 bg-indigo-50 flex justify-between items-center"
          >
            <div>
              <h3 class="text-lg leading-6 font-medium text-gray-900">
                Researcher #{{ singleResearcher().basic.id }}
              </h3>
              <p class="mt-1 max-w-2xl text-sm text-gray-500">
                {{ singleResearcher().basic.organization || "No organization" }}
              </p>
            </div>
            <span
              class="px-3 py-1 text-sm font-semibold rounded-full bg-green-100 text-green-800"
            >
              {{ singleResearcher().basic.role || "Researcher" }}
            </span>
          </div>

          <!-- Basic Information -->
          <div class="border-t border-gray-200">
            <dl>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Name</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleResearcher().basic.title || "" }}
                  {{ singleResearcher().basic.firstName }}
                  {{ singleResearcher().basic.lastName }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Email</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleResearcher().basic.email || "Not available" }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">LinkedIn</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <a
                    *ngIf="singleResearcher().basic.linkedinUrl"
                    [href]="singleResearcher().basic.linkedinUrl"
                    target="_blank"
                    class="text-indigo-600 hover:text-indigo-800"
                  >
                    {{ singleResearcher().basic.linkedinUrl }}
                  </a>
                  <span *ngIf="!singleResearcher().basic.linkedinUrl"
                    >Not available</span
                  >
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Location</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{
                    filterNonEmpty([
                      singleResearcher().basic.city,
                      singleResearcher().basic.state,
                      singleResearcher().basic.country
                    ]).join(", ") || "Not specified"
                  }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Faculty</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleResearcher().basic.faculty || "Not specified" }}
                  <a
                    *ngIf="singleResearcher().basic.facultyURL"
                    [href]="singleResearcher().basic.facultyURL"
                    target="_blank"
                    class="ml-2 text-indigo-600 hover:text-indigo-800"
                  >
                    (Website)
                  </a>
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Program</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleResearcher().basic.program || "Not specified" }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Biography</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{
                    singleResearcher().basic.biography ||
                      "No biography available"
                  }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">
                  Research Interests
                </dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{
                    singleResearcher().basic.researchInterests ||
                      "None specified"
                  }}
                </dd>
              </div>
            </dl>
          </div>

          <!-- Areas of Research -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Areas of Research
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let aor of singleResearcher().basic.areaOfResearches"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"
              >
                {{ aor }}
              </span>
              <span
                *ngIf="!singleResearcher().basic.areaOfResearches?.length"
                class="text-gray-500"
              >
                No areas of research specified
              </span>
            </div>
          </div>

          <!-- Keywords -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Keywords
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let keyword of singleResearcher().basic.keywords"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800"
              >
                {{ keyword }}
              </span>
              <span
                *ngIf="!singleResearcher().basic.keywords?.length"
                class="text-gray-500"
              >
                No keywords specified
              </span>
            </div>
          </div>

          <!-- Disciplines -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Disciplines
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let discipline of singleResearcher().basic.disciplines"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"
              >
                {{ discipline }}
              </span>
              <span
                *ngIf="!singleResearcher().basic.disciplines?.length"
                class="text-gray-500"
              >
                No disciplines specified
              </span>
            </div>
          </div>

          <!-- Experience Section -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Experience
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
            <dl class="sm:divide-y sm:divide-gray-200">
              <div
                *ngIf="!singleResearcher().experience?.length"
                class="py-4 sm:py-5 sm:px-6"
              >
                <p class="text-gray-500">No experience information available</p>
              </div>
              <div
                *ngFor="let exp of singleResearcher().experience"
                class="py-4 sm:py-5 sm:px-6 border-b border-gray-200"
              >
                <div class="mb-2">
                  <h4 class="text-md font-medium text-indigo-600">
                    {{ exp.title }}
                  </h4>
                  <p class="text-sm text-gray-700">
                    {{ exp.organizationName
                    }}{{ exp.department ? ", " + exp.department : "" }}
                  </p>
                  <p class="text-sm text-gray-500">{{ exp.duration }}</p>
                  <p class="text-sm text-gray-500">
                    {{
                      filterNonEmpty([
                        $any(exp).city,
                        $any(exp).state,
                        $any(exp).country
                      ]).join(", ")
                    }}
                  </p>
                </div>
                <p class="text-sm mt-2">
                  {{ exp.summary || "No description available" }}
                </p>
                <div class="mt-2 flex items-center space-x-2">
                  <span class="text-xs px-2 py-1 bg-gray-100 rounded-full">{{
                    exp.type || "Not specified"
                  }}</span>
                  <span class="text-xs px-2 py-1 bg-gray-100 rounded-full">{{
                    exp.industry || "Not specified"
                  }}</span>
                </div>
                <div class="mt-2">
                  <a
                    *ngIf="exp.organizationUrl"
                    [href]="exp.organizationUrl"
                    target="_blank"
                    class="text-xs text-indigo-600 hover:text-indigo-800"
                  >
                    Organization Website
                  </a>
                  <a
                    *ngIf="exp.organizationLinkedinUrl"
                    [href]="exp.organizationLinkedinUrl"
                    target="_blank"
                    class="ml-3 text-xs text-indigo-600 hover:text-indigo-800"
                  >
                    LinkedIn
                  </a>
                </div>
              </div>
            </dl>
          </div>

          <!-- Education Section -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Education
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
            <dl class="sm:divide-y sm:divide-gray-200">
              <div
                *ngIf="!singleResearcher().education?.length"
                class="py-4 sm:py-5 sm:px-6"
              >
                <p class="text-gray-500">No education information available</p>
              </div>
              <div
                *ngFor="let edu of singleResearcher().education"
                class="py-4 sm:py-5 sm:px-6 border-b border-gray-200"
              >
                <div class="mb-2">
                  <h4 class="text-md font-medium text-indigo-600">
                    {{ edu.degree }}{{ edu.major ? " in " + edu.major : "" }}
                  </h4>
                  <p class="text-sm text-gray-700">{{ edu.instituteName }}</p>
                  <p class="text-sm text-gray-500">
                    {{
                      edu.isCurrent
                        ? "Currently enrolled"
                        : edu.graduationDate || "Dates not specified"
                    }}
                  </p>
                  <p class="text-sm text-gray-500">
                    {{
                      filterNonEmpty([edu.city, edu.state, edu.country]).join(
                        ", "
                      )
                    }}
                  </p>
                </div>
                <p class="text-sm mt-2">
                  {{ edu.summary || "No description available" }}
                </p>
                <div *ngIf="edu.grade" class="mt-2">
                  <span class="text-xs font-medium">Grade: </span>
                  <span class="text-xs">{{ edu.grade }}</span>
                </div>
                <div class="mt-2">
                  <a
                    *ngIf="edu.institutionUrl"
                    [href]="edu.institutionUrl"
                    target="_blank"
                    class="text-xs text-indigo-600 hover:text-indigo-800"
                  >
                    Institution Website
                  </a>
                  <a
                    *ngIf="edu.instituteLinkedinUrl"
                    [href]="edu.instituteLinkedinUrl"
                    target="_blank"
                    class="ml-3 text-xs text-indigo-600 hover:text-indigo-800"
                  >
                    LinkedIn
                  </a>
                </div>
              </div>
            </dl>
          </div>

          <!-- Publications Section -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Publications
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
            <dl class="sm:divide-y sm:divide-gray-200">
              <div
                *ngIf="!singleResearcher().publications?.length"
                class="py-4 sm:py-5 sm:px-6"
              >
                <p class="text-gray-500">
                  No publication information available
                </p>
              </div>
              <div
                *ngFor="let pub of singleResearcher().publications"
                class="py-4 sm:py-5 sm:px-6 border-b border-gray-200"
              >
                <div class="mb-2">
                  <h4 class="text-md font-medium text-indigo-600">
                    {{ pub.publicationTitle }}
                  </h4>
                  <p class="text-sm text-gray-700">{{ pub.publisher }}</p>
                  <p class="text-sm text-gray-500">
                    Published: {{ pub.publishedOn }}
                  </p>
                  <div class="flex mt-1 space-x-2">
                    <span
                      class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full"
                    >
                      {{ pub.publicationCategory || "No category" }}
                    </span>
                    <span
                      class="text-xs px-2 py-1 rounded-full"
                      [ngClass]="{
                        'bg-green-100 text-green-800':
                          pub.publicationStatus === 'Published',
                        'bg-yellow-100 text-yellow-800':
                          pub.publicationStatus === 'In Progress',
                        'bg-gray-100 text-gray-800': !pub.publicationStatus
                      }"
                    >
                      {{ pub.publicationStatus || "Status unknown" }}
                    </span>
                  </div>
                </div>
                <p class="text-sm mt-2">
                  {{ pub.summary || "No summary available" }}
                </p>
                <div class="mt-2">
                  <a
                    *ngIf="pub.publicationUrl"
                    [href]="pub.publicationUrl"
                    resertarget="_blank"
                    class="text-xs text-indigo-600 hover:text-indigo-800"
                  >
                    View Publication
                  </a>
                </div>
              </div>
            </dl>
          </div>
        </div>
      </div>
      <div
        id="add-researcher-by-parameters"
        class="max-w-9xl mx-auto mb-8 mt-8"
      >
        <!-- Descriptive Information -->
        <div
          class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <h2 class="text-xl font-semibold mb-2">
            Add researcher by parameters
          </h2>
          <p class="text-gray-700 mb-2">
            Adds a new researcher to the system by providing structured
            parameters including triggering the AI stack and Area of Research
            (AOR) attachment.
          </p>
          <div class="text-sm text-gray-600">
            <p>Endpoint: <span class="font-mono">POST /researcher</span></p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/researcher"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/researcher</a
              >
            </p>
          </div>
        </div>

        <!-- Form Container -->
        <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
          <form
            [formGroup]="addResearcherForm"
            class="space-y-6"
            (ngSubmit)="addResearcherByParameters()"
          >
            <!-- Basic Information -->
            <div class="mb-6" formGroupName="basic">
              <h3 class="text-lg font-medium text-gray-900 mb-4">
                Basic Information
              </h3>

              <!-- First row -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-2">
                  <label
                    for="title"
                    class="block text-sm font-medium text-gray-700"
                    >Title</label
                  >
                  <select
                    id="title"
                    formControlName="title"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  >
                    <option value="">Select title</option>
                    <option value="Dr.">Dr.</option>
                    <option value="Prof.">Prof.</option>
                    <option value="Mr.">Mr.</option>
                    <option value="Mrs.">Mrs.</option>
                    <option value="Ms.">Ms.</option>
                  </select>
                </div>
                <div class="space-y-2">
                  <label
                    for="firstName"
                    class="block text-sm font-medium text-gray-700"
                    >First Name *</label
                  >
                  <input
                    type="text"
                    id="firstName"
                    formControlName="firstName"
                    placeholder="Enter first name"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="middleName"
                    class="block text-sm font-medium text-gray-700"
                    >Middle Name</label
                  >
                  <input
                    type="text"
                    id="middleName"
                    formControlName="middleName"
                    placeholder="Enter middle name"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <!-- Second row -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
                <div class="space-y-2">
                  <label
                    for="lastName"
                    class="block text-sm font-medium text-gray-700"
                    >Last Name</label
                  >
                  <input
                    type="text"
                    id="lastName"
                    formControlName="lastName"
                    placeholder="Enter last name"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="email"
                    class="block text-sm font-medium text-gray-700"
                    >Email</label
                  >
                  <input
                    type="email"
                    id="email"
                    formControlName="email"
                    placeholder="Enter email address"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="gender"
                    class="block text-sm font-medium text-gray-700"
                    >Gender</label
                  >
                  <select
                    id="gender"
                    formControlName="gender"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  >
                    <option value="">Select gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Non-binary">Non-binary</option>
                    <option value="Prefer not to say">Prefer not to say</option>
                  </select>
                </div>
              </div>

              <!-- Third row -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="space-y-2">
                  <label
                    for="linkedinUrl"
                    class="block text-sm font-medium text-gray-700"
                    >LinkedIn URL</label
                  >
                  <input
                    type="text"
                    id="linkedinUrl"
                    formControlName="linkedinUrl"
                    placeholder="Enter LinkedIn profile URL"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="researchInterests"
                    class="block text-sm font-medium text-gray-700"
                    >Research Interests</label
                  >
                  <input
                    type="text"
                    id="researchInterests"
                    formControlName="researchInterests"
                    placeholder="Enter research interests"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <!-- Fourth row -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
                <div class="space-y-2">
                  <label
                    for="faculty"
                    class="block text-sm font-medium text-gray-700"
                    >Faculty</label
                  >
                  <input
                    type="text"
                    id="faculty"
                    formControlName="faculty"
                    placeholder="Enter faculty"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="program"
                    class="block text-sm font-medium text-gray-700"
                    >Program</label
                  >
                  <input
                    type="text"
                    id="program"
                    formControlName="program"
                    placeholder="Enter program"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="role"
                    class="block text-sm font-medium text-gray-700"
                    >Role</label
                  >
                  <input
                    type="text"
                    id="role"
                    formControlName="role"
                    placeholder="Enter role"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <!-- Fifth row -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                <div class="space-y-2">
                  <label
                    for="organization"
                    class="block text-sm font-medium text-gray-700"
                    >Organization</label
                  >
                  <input
                    type="text"
                    id="organization"
                    formControlName="organization"
                    placeholder="Enter organization"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="facultyURL"
                    class="block text-sm font-medium text-gray-700"
                    >Faculty URL</label
                  >
                  <input
                    type="text"
                    id="facultyURL"
                    formControlName="facultyURL"
                    placeholder="Enter faculty URL"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <!-- Sixth row -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
                <div class="space-y-2">
                  <label
                    for="country"
                    class="block text-sm font-medium text-gray-700"
                    >Country</label
                  >
                  <input
                    type="text"
                    id="country"
                    formControlName="country"
                    placeholder="Enter country"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="state"
                    class="block text-sm font-medium text-gray-700"
                    >State/Province</label
                  >
                  <input
                    type="text"
                    id="state"
                    formControlName="state"
                    placeholder="Enter state or province"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
                <div class="space-y-2">
                  <label
                    for="city"
                    class="block text-sm font-medium text-gray-700"
                    >City</label
                  >
                  <input
                    type="text"
                    id="city"
                    formControlName="city"
                    placeholder="Enter city"
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>

              <!-- Biography -->
              <div class="mt-4 space-y-2">
                <label
                  for="biography"
                  class="block text-sm font-medium text-gray-700"
                  >Biography</label
                >
                <textarea
                  id="biography"
                  formControlName="biography"
                  placeholder="Enter biography"
                  rows="3"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                ></textarea>
              </div>

              <!-- Keywords -->
              <div class="mt-4">
                <div class="flex justify-between items-center mb-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Keywords</label
                  >
                  <button
                    type="button"
                    (click)="addBasicArrayItem('basic.keywords')"
                    class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                  >
                    <svg
                      class="h-4 w-4 mr-1"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                      ></path>
                    </svg>
                    Add Keyword
                  </button>
                </div>

                <div formArrayName="keywords" class="space-y-2">
                  <div
                    *ngFor="
                      let keyword of basicKeywordsArray.controls;
                      let i = index
                    "
                    class="flex space-x-2"
                  >
                    <input
                      [formControlName]="i"
                      placeholder="Enter keyword"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                    <button
                      *ngIf="basicKeywordsArray.length > 1"
                      type="button"
                      (click)="removeBasicArrayItem('basic.keywords', i)"
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Areas of Research -->
              <div class="mt-4">
                <div class="flex justify-between items-center mb-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Areas of Research</label
                  >
                  <button
                    type="button"
                    (click)="addBasicArrayItem('basic.areaOfResearches')"
                    class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                  >
                    <svg
                      class="h-4 w-4 mr-1"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                      ></path>
                    </svg>
                    Add Area of Research
                  </button>
                </div>

                <div formArrayName="areaOfResearches" class="space-y-2">
                  <div
                    *ngFor="
                      let area of basicAreaOfResearchesArray.controls;
                      let i = index
                    "
                    class="flex space-x-2"
                  >
                    <input
                      [formControlName]="i"
                      placeholder="Enter area of research"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                    <button
                      *ngIf="basicAreaOfResearchesArray.length > 1"
                      type="button"
                      (click)="
                        removeBasicArrayItem('basic.areaOfResearches', i)
                      "
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Disciplines -->
              <div class="mt-4">
                <div class="flex justify-between items-center mb-2">
                  <label class="block text-sm font-medium text-gray-700"
                    >Disciplines</label
                  >
                  <button
                    type="button"
                    (click)="addBasicArrayItem('basic.disciplines')"
                    class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                  >
                    <svg
                      class="h-4 w-4 mr-1"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                      ></path>
                    </svg>
                    Add Discipline
                  </button>
                </div>

                <div formArrayName="disciplines" class="space-y-2">
                  <div
                    *ngFor="
                      let discipline of basicDisciplinesArray.controls;
                      let i = index
                    "
                    class="flex space-x-2"
                  >
                    <input
                      [formControlName]="i"
                      placeholder="Enter discipline"
                      class="flex-grow px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                    <button
                      *ngIf="basicDisciplinesArray.length > 1"
                      type="button"
                      (click)="removeBasicArrayItem('basic.disciplines', i)"
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Experience Section -->
            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Experience</h3>
                <button
                  type="button"
                  (click)="toggleExperienceSection()"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  {{
                    showExperienceSection()
                      ? "Hide Experience"
                      : "Add Experience"
                  }}
                </button>
              </div>

              <!-- Experience form array - only shown when showExperienceSection is true -->
              <div
                *ngIf="showExperienceSection()"
                formArrayName="experience"
                class="space-y-4"
              >
                <div
                  *ngFor="let exp of experienceArray.controls; let i = index"
                  [formGroupName]="i"
                  class="p-4 border border-gray-200 rounded-md"
                >
                  <div class="flex justify-between items-center mb-2">
                    <span class="font-medium">Experience #{{ i + 1 }}</span>
                    <button
                      type="button"
                      (click)="removeExperience(i)"
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-4 w-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        ></path>
                      </svg>
                    </button>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Job Title <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        formControlName="title"
                        placeholder="Enter job title"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        [ngClass]="{
                          'border-red-500':
                            exp.get('title')?.invalid &&
                            exp.get('title')?.touched
                        }"
                      />
                      <div
                        *ngIf="
                          exp.get('title')?.invalid && exp.get('title')?.touched
                        "
                        class="text-red-500 text-xs mt-1"
                      >
                        Job title is required
                      </div>
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Organization Name <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        formControlName="organizationName"
                        placeholder="Enter organization name"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        [ngClass]="{
                          'border-red-500':
                            exp.get('organizationName')?.invalid &&
                            exp.get('organizationName')?.touched
                        }"
                      />
                      <div
                        *ngIf="
                          exp.get('organizationName')?.invalid &&
                          exp.get('organizationName')?.touched
                        "
                        class="text-red-500 text-xs mt-1"
                      >
                        Organization name is required
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Employment Type
                      </label>
                      <input
                        type="text"
                        formControlName="type"
                        placeholder="e.g., Full-time, Part-time, Contract"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Industry
                      </label>
                      <input
                        type="text"
                        formControlName="industry"
                        placeholder="Enter industry"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Department
                      </label>
                      <input
                        type="text"
                        formControlName="department"
                        placeholder="Enter department"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Organization Website
                      </label>
                      <input
                        type="url"
                        formControlName="organizationUrl"
                        placeholder="Enter organization website"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Start Date
                      </label>
                      <input
                        type="date"
                        [value]="
                          formatDateForInput(
                            exp.get('startYear')?.value,
                            exp.get('startMonth')?.value,
                            exp.get('startDay')?.value
                          )
                        "
                        (change)="updateExperienceStartDate($event, i)"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        End Date
                      </label>
                      <div class="flex items-center">
                        <input
                          type="date"
                          [value]="
                            formatDateForInput(
                              exp.get('endYear')?.value,
                              exp.get('endMonth')?.value,
                              exp.get('endDay')?.value
                            )
                          "
                          (change)="updateExperienceEndDate($event, i)"
                          [disabled]="exp.get('isCurrent')?.value"
                          class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        />
                      </div>
                      <div class="flex items-center mt-2">
                        <input
                          type="checkbox"
                          id="expIsCurrent-{{ i }}"
                          formControlName="isCurrent"
                          class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                        />
                        <label
                          for="expIsCurrent-{{ i }}"
                          class="ml-2 block text-sm text-gray-700"
                        >
                          I currently work here
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Country
                      </label>
                      <input
                        type="text"
                        formControlName="country"
                        placeholder="Enter country"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        State/Province
                      </label>
                      <input
                        type="text"
                        formControlName="state"
                        placeholder="Enter state/province"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        City
                      </label>
                      <input
                        type="text"
                        formControlName="city"
                        placeholder="Enter city"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="mt-4 space-y-2">
                    <label class="block text-sm font-medium text-gray-700">
                      LinkedIn URL
                    </label>
                    <input
                      type="url"
                      formControlName="organizationLinkedinUrl"
                      placeholder="Enter organization LinkedIn URL"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>

                  <div class="mt-4 space-y-2">
                    <label class="block text-sm font-medium text-gray-700">
                      Summary
                    </label>
                    <textarea
                      formControlName="summary"
                      placeholder="Describe your responsibilities and achievements"
                      rows="3"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    ></textarea>
                  </div>
                </div>

                <!-- Button to add another experience -->
                <button
                  type="button"
                  (click)="addExperience()"
                  class="mt-2 inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Another Experience
                </button>
              </div>
            </div>

            <!-- Education Section -->
            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Education</h3>
                <button
                  type="button"
                  (click)="toggleEducationSection()"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  {{
                    showEducationSection() ? "Hide Education" : "Add Education"
                  }}
                </button>
              </div>

              <div
                *ngIf="showEducationSection()"
                formArrayName="education"
                class="space-y-4"
              >
                <div
                  *ngFor="let edu of educationArray.controls; let i = index"
                  [formGroupName]="i"
                  class="p-4 border border-gray-200 rounded-md"
                >
                  <div class="flex justify-between items-center mb-2">
                    <span class="font-medium">Education #{{ i + 1 }}</span>
                    <button
                      *ngIf="educationArray.length > 1"
                      type="button"
                      (click)="removeEducation(i)"
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-4 w-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        ></path>
                      </svg>
                    </button>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Institution Name <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        formControlName="instituteName"
                        placeholder="Enter institution name"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        [ngClass]="{
                          'border-red-500':
                            edu.get('instituteName')?.invalid &&
                            edu.get('instituteName')?.touched
                        }"
                      />
                      <div
                        *ngIf="
                          edu.get('instituteName')?.invalid &&
                          edu.get('instituteName')?.touched
                        "
                        class="text-red-500 text-xs mt-1"
                      >
                        Institution name is required
                      </div>
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Degree <span class="text-red-500">*</span>
                      </label>
                      <input
                        type="text"
                        formControlName="degree"
                        placeholder="Enter degree"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        [ngClass]="{
                          'border-red-500':
                            edu.get('degree')?.invalid &&
                            edu.get('degree')?.touched
                        }"
                      />
                      <div
                        *ngIf="
                          edu.get('degree')?.invalid &&
                          edu.get('degree')?.touched
                        "
                        class="text-red-500 text-xs mt-1"
                      >
                        Degree is required
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700"
                        >Major</label
                      >
                      <input
                        type="text"
                        formControlName="major"
                        placeholder="Enter major"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700"
                        >Grade</label
                      >
                      <input
                        type="text"
                        formControlName="grade"
                        placeholder="Enter grade"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Start Date
                      </label>
                      <input
                        type="date"
                        [value]="
                          formatDateForInput(
                            edu.get('startYear')?.value,
                            edu.get('startMonth')?.value,
                            edu.get('startDay')?.value
                          )
                        "
                        (change)="updateEducationStartDate($event, i)"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        End Date
                      </label>
                      <div class="flex items-center">
                        <input
                          type="date"
                          [value]="
                            formatDateForInput(
                              edu.get('endYear')?.value,
                              edu.get('endMonth')?.value,
                              edu.get('endDay')?.value
                            )
                          "
                          (change)="updateEducationEndDate($event, i)"
                          [disabled]="edu.get('isCurrent')?.value"
                          class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                        />
                      </div>
                      <div class="flex items-center mt-2">
                        <input
                          type="checkbox"
                          id="isCurrent-{{ i }}"
                          formControlName="isCurrent"
                          class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                        />
                        <label
                          for="isCurrent-{{ i }}"
                          class="ml-2 block text-sm text-gray-700"
                        >
                          Currently studying here
                        </label>
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Institution Website
                      </label>
                      <input
                        type="url"
                        formControlName="institutionUrl"
                        placeholder="Enter institution website"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Institution LinkedIn
                      </label>
                      <input
                        type="url"
                        formControlName="instituteLinkedinUrl"
                        placeholder="Enter institution LinkedIn URL"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        Country
                      </label>
                      <input
                        type="text"
                        formControlName="country"
                        placeholder="Enter country"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700">
                        State/Province
                      </label>
                      <input
                        type="text"
                        formControlName="state"
                        placeholder="Enter state/province"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700"
                        >City</label
                      >
                      <input
                        type="text"
                        formControlName="city"
                        placeholder="Enter city"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="mt-4 space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Summary</label
                    >
                    <textarea
                      formControlName="summary"
                      placeholder="Enter a summary of your education"
                      rows="2"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    ></textarea>
                  </div>
                </div>

                <!-- Button to add another education entry -->
                <button
                  type="button"
                  (click)="addEducation()"
                  class="mt-2 inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Another Education
                </button>
              </div>
            </div>

            <!-- Publications Section -->
            <div class="border-t border-gray-200 pt-4">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900">Publications</h3>
                <button
                  type="button"
                  (click)="togglePublicationsSection()"
                  class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  {{
                    showPublicationsSection()
                      ? "Hide Publications"
                      : "Add Publication"
                  }}
                </button>
              </div>

              <div
                *ngIf="showPublicationsSection()"
                formArrayName="publications"
                class="space-y-4"
              >
                <div
                  *ngFor="let pub of publicationsArray.controls; let i = index"
                  [formGroupName]="i"
                  class="p-4 border border-gray-200 rounded-md"
                >
                  <div class="flex justify-between items-center mb-2">
                    <span class="font-medium">Publication #{{ i + 1 }}</span>
                    <button
                      *ngIf="publicationsArray.length > 1"
                      type="button"
                      (click)="removePublication(i)"
                      class="text-red-600 hover:text-red-800"
                    >
                      <svg
                        class="h-4 w-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                        ></path>
                      </svg>
                    </button>
                  </div>

                  <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-700">
                      Title <span class="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      formControlName="title"
                      placeholder="Enter publication title"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      [ngClass]="{
                        'border-red-500':
                          pub.get('title')?.invalid && pub.get('title')?.touched
                      }"
                    />
                    <div
                      *ngIf="
                        pub.get('title')?.invalid && pub.get('title')?.touched
                      "
                      class="text-red-500 text-xs mt-1"
                    >
                      Publication title is required
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700"
                        >Status</label
                      >
                      <input
                        type="text"
                        formControlName="status"
                        placeholder="e.g., Published, In Press"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700"
                        >Publisher</label
                      >
                      <input
                        type="text"
                        formControlName="publisher"
                        placeholder="e.g., Springer, IEEE"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                    <div class="space-y-2">
                      <label class="block text-sm font-medium text-gray-700"
                        >Type</label
                      >
                      <input
                        type="text"
                        formControlName="type"
                        placeholder="e.g., Journal Article, Conference Paper"
                        class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      />
                    </div>
                  </div>

                  <div class="mt-4 space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >URL</label
                    >
                    <input
                      type="url"
                      formControlName="url"
                      placeholder="Enter publication URL"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>

                  <div class="mt-4 space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Publication Date</label
                    >
                    <input
                      type="date"
                      [value]="
                        formatDateForInput(
                          pub.get('publishedYear')?.value,
                          pub.get('publishedMonth')?.value,
                          pub.get('publishedDay')?.value
                        )
                      "
                      (change)="updatePublicationDate($event, i)"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>

                  <div class="mt-4 space-y-2">
                    <label class="block text-sm font-medium text-gray-700"
                      >Summary</label
                    >
                    <textarea
                      formControlName="summary"
                      placeholder="Enter publication summary"
                      rows="2"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    ></textarea>
                  </div>
                </div>

                <!-- Button to add another publication -->
                <button
                  type="button"
                  (click)="addPublication()"
                  class="mt-2 inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                >
                  <svg
                    class="h-4 w-4 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                    ></path>
                  </svg>
                  Add Another Publication
                </button>
              </div>
            </div>

            <!-- Form Actions -->
            <div class="mt-6 flex justify-center space-x-3">
              <button
                type="submit"
                [disabled]="addResearcherForm.invalid || addResearcherLoading()"
                [class.opacity-50]="
                  addResearcherForm.invalid || addResearcherLoading()
                "
                [class.cursor-not-allowed]="
                  addResearcherForm.invalid || addResearcherLoading()
                "
                class="inline-flex justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                <svg
                  *ngIf="addResearcherLoading()"
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                {{
                  addResearcherLoading()
                    ? "Adding Researcher..."
                    : "Add Researcher"
                }}
              </button>
              <button
                type="button"
                (click)="resetAddResearcherForm()"
                class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                Reset
              </button>
            </div>

            <!-- Success/Error Messages -->
            <div
              *ngIf="addResearcherSuccess() || addResearcherError()"
              class="mt-4"
            >
              <div
                *ngIf="addResearcherSuccess()"
                class="p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg"
                role="alert"
              >
                <div class="font-medium">
                  {{ addResearcherSuccess().message }}
                </div>
                <div>
                  Researcher has been added successfully with ID:
                  {{ addResearcherSuccess().researcherId }}
                </div>
              </div>

              <div
                *ngIf="addResearcherError()"
                class="p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg"
                role="alert"
              >
                <div class="font-medium">Error!</div>
                <div>{{ addResearcherError() }}</div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <!-- ! Add Researcher by PDF -->
      <div id="add-researcher-by-pdf" class="max-w-9xl mx-auto mb-8 mt-8">
        <div
          class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <h2 class="text-xl font-semibold mb-2">Add researcher by PDF</h2>
          <p class="text-gray-700 mb-2">
            Adds a new researcher to the system by providing structured
            parameters and a PDF file including triggering the AI stack and Area
            of Research(AOR) attachment. Adding a researcher by PDF includes 2
            steps.
          </p>
          <h3 class="text-lg font-medium text-gray-900 mb-2">
            Step 1: Get PDF upload URL and file Id
          </h3>
          <p class="text-gray-700 mb-2">
            Retrieves a temporary URL and file ID to upload the PDF file
          </p>
          <div class="text-sm text-gray-600">
            <p>
              Endpoint:
              <span class="font-mono">GET /uploadURL/researcher/pdf</span>
            </p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/uploadURL/researcher/pdf"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/uploadURL/researcher/pdf</a
              >
            </p>
          </div>
        </div>

        <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
          <!-- Combined file selection and upload -->
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Select and Upload PDF File
            </label>

            <div class="flex flex-col space-y-2 max-w-xs">
              <button
                (click)="researcherFileInput.click()"
                [disabled]="researcherUploadUrlLoading()"
                class="inline-flex items-center justify-center px-4 py-2.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition-colors duration-150"
              >
                <svg
                  *ngIf="
                    !researcherUploadUrlLoading() && !selectedResearcherPdfFile
                  "
                  class="w-5 h-5 mr-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                  ></path>
                </svg>

                <svg
                  *ngIf="
                    !researcherUploadUrlLoading() && selectedResearcherPdfFile
                  "
                  class="w-5 h-5 mr-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  ></path>
                </svg>

                <svg
                  *ngIf="researcherUploadUrlLoading()"
                  class="animate-spin -ml-1 mr-2 h-5 w-5"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>

                <span
                  *ngIf="
                    !researcherUploadUrlLoading() && !selectedResearcherPdfFile
                  "
                >
                  Select & Upload PDF
                </span>
                <span
                  *ngIf="
                    !researcherUploadUrlLoading() && selectedResearcherPdfFile
                  "
                  class="truncate max-w-[180px]"
                >
                  {{ selectedResearcherPdfFile.name }}
                </span>
                <span *ngIf="researcherUploadUrlLoading()"> Uploading... </span>
              </button>

              <!-- Hidden file input -->
              <input
                #researcherFileInput
                type="file"
                id="researcher-pdf-file"
                accept=".pdf"
                (change)="onResearcherFileSelectedAndUpload($event)"
                class="hidden"
              />

              <p class="text-xs text-gray-500">
                Click the button to select a PDF file. The file will be
                automatically uploaded once selected.
              </p>
            </div>
          </div>

          <!-- Display the URL when available -->
          <div
            *ngIf="researcherUploadUrlResponse()"
            class="mt-4 p-4 bg-gray-50 rounded"
          >
            <div class="mb-2">
              <p class="text-sm font-medium text-gray-900">Upload Status:</p>
              <p class="mt-1 text-sm text-green-500">
                <svg
                  class="inline-block h-5 w-5 mr-1"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                    clip-rule="evenodd"
                  />
                </svg>
                File uploaded successfully!
              </p>
            </div>
            <div>
              <p class="text-sm font-medium text-gray-900">File ID:</p>
              <p class="mt-1 text-sm text-gray-500">
                {{ researcherUploadUrlResponse()?.fileId }}
              </p>
            </div>
            <div class="mt-4">
              <p class="text-sm text-gray-600">
                The file has been uploaded successfully. Please proceed to Step
                2 below to add the researcher.
              </p>
            </div>
          </div>

          <!-- Display error if any -->
          <div
            *ngIf="researcherUploadUrlError()"
            class="mt-4 p-4 bg-red-50 text-red-700 rounded"
          >
            <div class="flex">
              <div class="flex-shrink-0">
                <svg
                  class="h-5 w-5 text-red-400"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>
              <div class="ml-3">
                <p class="text-sm">{{ researcherUploadUrlError() }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 2 Description -->
        <div
          *ngIf="researcherUploadUrlResponse()"
          class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200 mt-8"
        >
          <h3 class="text-lg font-medium text-gray-900 mb-2">
            Step 2: Add researcher by PDF file ID
          </h3>
          <p class="text-gray-700 mb-2">
            After successfully uploading the PDF file, use the returned file ID
            to add a new researcher to the system.
          </p>
          <div class="text-sm text-gray-600">
            <p>Endpoint: <span class="font-mono">POST /researcher/pdf</span></p>
            <p>
              Endpoint example:
              <a
                href="https://api.research.profoundimpact.com/v1/researcher/pdf"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/researcher/pdf</a
              >
            </p>
          </div>
        </div>

        <!-- Form Container -->
        <div
          *ngIf="researcherUploadUrlResponse()"
          class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md"
        >
          <form
            [formGroup]="addResearcherPdfForm"
            (ngSubmit)="addResearcherByPdf()"
            class="space-y-6"
          >
            <!-- Basic Information -->
            <div class="mb-6">
              <h3 class="text-lg font-medium text-gray-900 mb-4">
                Basic Information
              </h3>

              <div formGroupName="basic" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div class="space-y-2">
                    <label
                      for="pdf-title"
                      class="block text-sm font-medium text-gray-700"
                      >Title</label
                    >
                    <select
                      id="pdf-title"
                      formControlName="title"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    >
                      <option value="">Select title</option>
                      <option value="Dr.">Dr.</option>
                      <option value="Prof.">Prof.</option>
                      <option value="Mr.">Mr.</option>
                      <option value="Mrs.">Mrs.</option>
                      <option value="Ms.">Ms.</option>
                    </select>
                  </div>
                  <div class="space-y-2">
                    <label
                      for="pdf-firstName"
                      class="block text-sm font-medium text-gray-700"
                      >First Name *</label
                    >
                    <input
                      type="text"
                      id="pdf-firstName"
                      formControlName="firstName"
                      placeholder="Enter first name"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div class="space-y-2">
                    <label
                      for="pdf-lastName"
                      class="block text-sm font-medium text-gray-700"
                      >Last Name *</label
                    >
                    <input
                      type="text"
                      id="pdf-lastName"
                      formControlName="lastName"
                      placeholder="Enter last name"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div class="space-y-2">
                    <label
                      for="pdf-email"
                      class="block text-sm font-medium text-gray-700"
                      >Email</label
                    >
                    <input
                      type="email"
                      id="pdf-email"
                      formControlName="email"
                      placeholder="Enter email address"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div class="space-y-2">
                    <label
                      for="pdf-linkedinUrl"
                      class="block text-sm font-medium text-gray-700"
                      >LinkedIn URL</label
                    >
                    <input
                      type="text"
                      id="pdf-linkedinUrl"
                      formControlName="linkedinUrl"
                      placeholder="Enter LinkedIn profile URL"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div class="space-y-2">
                    <label
                      for="pdf-country"
                      class="block text-sm font-medium text-gray-700"
                      >Country</label
                    >
                    <input
                      type="text"
                      id="pdf-country"
                      formControlName="country"
                      placeholder="Enter country"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div class="space-y-2">
                    <label
                      for="pdf-state"
                      class="block text-sm font-medium text-gray-700"
                      >State/Province</label
                    >
                    <input
                      type="text"
                      id="pdf-state"
                      formControlName="state"
                      placeholder="Enter state or province"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                  <div class="space-y-2">
                    <label
                      for="pdf-city"
                      class="block text-sm font-medium text-gray-700"
                      >City</label
                    >
                    <input
                      type="text"
                      id="pdf-city"
                      formControlName="city"
                      placeholder="Enter city"
                      class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    />
                  </div>
                </div>

                <div class="space-y-2">
                  <label
                    for="pdf-pdfFileName"
                    class="block text-sm font-medium text-gray-700"
                    >PDF File Name *</label
                  >
                  <input
                    type="text"
                    id="pdf-pdfFileName"
                    formControlName="pdfFileName"
                    placeholder="Enter PDF file name"
                    readonly
                    class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                </div>
              </div>
            </div>

            <!-- Submit buttons -->
            <div class="flex justify-center gap-4 pt-4">
              <button
                type="submit"
                [disabled]="
                  addResearcherPdfLoading() || addResearcherPdfForm.invalid
                "
                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
              >
                <span *ngIf="addResearcherPdfLoading()">
                  <svg
                    class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      class="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      stroke-width="4"
                    ></circle>
                    <path
                      class="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Adding Researcher...
                </span>
                <span *ngIf="!addResearcherPdfLoading()"
                  >Add Researcher with PDF</span
                >
              </button>
              <button
                type="button"
                (click)="resetAddResearcherPdfForm()"
                class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                Reset Form
              </button>
            </div>
          </form>

          <!-- Error message -->
          <div
            *ngIf="addResearcherPdfError()"
            class="mt-4 p-4 bg-red-50 border-l-4 border-red-500"
          >
            <div class="flex">
              <div class="flex-shrink-0">
                <svg
                  class="h-5 w-5 text-red-500"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>
              <div class="ml-3">
                <p class="text-sm text-red-700">
                  {{ addResearcherPdfError() }}
                </p>
              </div>
            </div>
          </div>

          <!-- Success message -->
          <!-- Add this after the form in the Add Researcher by PDF section -->
          <div
            *ngIf="addResearcherPdfSuccess()"
            class="mt-6 p-4 bg-green-50 rounded-md"
          >
            <div class="flex">
              <div class="flex-shrink-0">
                <svg
                  class="h-5 w-5 text-green-400"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                    clip-rule="evenodd"
                  />
                </svg>
              </div>
              <div class="ml-3">
                <h3 class="text-sm font-medium text-green-800">Success!</h3>
                <div class="mt-2 text-sm text-green-700">
                  <p>{{ addResearcherPdfSuccess().message }}</p>
                  <p class="mt-1">
                    Researcher ID: {{ addResearcherPdfSuccess().researcherId }}
                  </p>
                </div>
                <div class="mt-4">
                  <button
                    type="button"
                    (click)="resetAddResearcherPdfForm()"
                    class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                  >
                    Add Another Researcher
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Search matches -->
      <div id="search-matches">
        <!-- Header Section -->
        <div
          class="max-w-9xl mx-auto mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200"
        >
          <h2 class="text-xl font-semibold mb-2">Search Matches</h2>
          <p class="text-gray-700 mb-2">
            Retrieves detailed information about matches between researchers and
            grants using filters. Values in each field use "OR" logic, fields
            use "AND" logic between them.
          </p>
          <div class="text-sm text-gray-600">
            <p>Endpoint: <span class="font-mono">POST /match/search</span></p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/match/search"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/match/search</a
              >
            </p>
          </div>
        </div>

        <!-- Form Section -->
        <div class="max-w-9xl mx-auto p-6 bg-white rounded-lg shadow-md">
          <form
            [formGroup]="matchSearchForm"
            class="space-y-6"
            (ngSubmit)="searchForMatches()"
          >
            <div>Use semicolon (;) to enter multiple search phrases</div>

            <!-- First row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="researcherIds"
                  class="block text-sm font-medium text-gray-700"
                >
                  Researcher IDs:
                </label>
                <input
                  type="text"
                  id="researcherIds"
                  formControlName="researcherIds"
                  placeholder="E.g., 1019; 1020; 1016"
                  pattern="^[0-9;]*$"
                  (input)="sanitizeResearcherIdsInput($event)"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="grantIds"
                  class="block text-sm font-medium text-gray-700"
                >
                  Grant IDs:
                </label>
                <input
                  type="text"
                  id="grantIds"
                  formControlName="grantIds"
                  placeholder="E.g., 78990; 78963"
                  pattern="^[0-9;]*$"
                  (input)="sanitizeResearcherIdsInput($event)"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Second row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="grantSources"
                  class="block text-sm font-medium text-gray-700"
                >
                  Grant Sources:
                </label>
                <input
                  type="text"
                  id="grantSources"
                  formControlName="grantSources"
                  placeholder="E.g., Canadian Institutes of Health Research; NSERC"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="grantTitles"
                  class="block text-sm font-medium text-gray-700"
                >
                  Grant Titles:
                </label>
                <input
                  type="text"
                  id="grantTitles"
                  formControlName="grantTitles"
                  placeholder="E.g., Research Grant; Development Fund"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Third row -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label
                  for="researcherNames"
                  class="block text-sm font-medium text-gray-700"
                >
                  Researcher Names:
                </label>
                <input
                  type="text"
                  id="researcherNames"
                  formControlName="researcherNames"
                  placeholder="E.g., John Smith; Jane Doe"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
              <div class="space-y-2">
                <label
                  for="projectIds"
                  class="block text-sm font-medium text-gray-700"
                >
                  Project IDs:
                </label>
                <input
                  type="text"
                  id="projectIds"
                  formControlName="projectIds"
                  placeholder="E.g., 244; 249"
                  pattern="^[0-9;]*$"
                  (input)="sanitizeResearcherIdsInput($event)"
                  class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
              </div>
            </div>

            <!-- Try Match Checkbox -->
            <div class="flex items-center">
              <input
                id="triMatch"
                type="checkbox"
                formControlName="triMatch"
                class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
              />
              <label for="triMatch" class="ml-2 block text-sm text-gray-700">
                Tri Match
              </label>
            </div>

            <!-- Submit button with loading state -->
            <div class="flex justify-center gap-4">
              <button
                type="submit"
                [disabled]="matchLoading()"
                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"
              >
                <span *ngIf="matchLoading()">
                  <svg
                    class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                  >
                    <circle
                      class="opacity-25"
                      cx="12"
                      cy="12"
                      r="10"
                      stroke="currentColor"
                      stroke-width="4"
                    ></circle>
                    <path
                      class="opacity-75"
                      fill="currentColor"
                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                    ></path>
                  </svg>
                  Searching...
                </span>
                <span *ngIf="!matchLoading()">Search Matches</span>
              </button>
              <button
                type="button"
                (click)="resetMatchSearchForm()"
                class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
              >
                Reset
              </button>
            </div>
          </form>
        </div>

        <!-- Match Results Table -->
        <div class="max-w-9xl mx-auto mt-8">
          <h2 class="text-xl font-semibold mb-4">Match search results</h2>
          <!-- Loading spinner -->
          <div *ngIf="matchLoading()" class="flex justify-center py-8">
            <svg
              class="animate-spin h-10 w-10 text-indigo-600"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
          </div>
          <!-- Desktop Table View (hidden on small screens) -->
          <div
            *ngIf="!matchLoading() && matches().length > 0"
            class="hidden md:block overflow-x-auto rounded-lg border border-gray-200 shadow-md"
          >
            <table
              class="min-w-full divide-y divide-gray-200 table-fixed w-full max-w-full"
            >
              <thead class="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Match ID
                  </th>
                  <th
                    scope="col"
                    class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Score
                  </th>
                  <th
                    scope="col"
                    class="w-24 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Date
                  </th>
                  <th
                    scope="col"
                    class="w-15 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Archived
                  </th>
                  <th
                    scope="col"
                    class="w-26 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Researcher ID
                  </th>
                  <th
                    scope="col"
                    class="w-1/8 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Researcher
                  </th>
                  <th
                    scope="col"
                    class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Grant ID
                  </th>
                  <th
                    scope="col"
                    class="w-1/8 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Grant Title
                  </th>
                  <th
                    scope="col"
                    class="w-20 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider xl:table-cell hidden"
                  >
                    Grant Source
                  </th>
                  <!-- Project ID column - hide when triMatch form control is true -->
                  <th
                    *ngIf="this.hideProjectCol"
                    scope="col"
                    class="w-16 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider lg:table-cell hidden"
                  >
                    Project ID
                  </th>
                  <!-- Project Title column - hide when triMatch form control is true -->
                  <th
                    *ngIf="this.hideProjectCol"
                    scope="col"
                    class="w-1/8 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Project Title
                  </th>
                  <!-- Project Org column - hide when triMatch form control is true -->
                  <th
                    *ngIf="this.hideProjectCol"
                    scope="col"
                    class="w-20 px-2 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider xl:table-cell hidden"
                  >
                    Project Org
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let match of matches()" class="hover:bg-gray-50">
                  <td
                    class="px-2 sm:px-4 py-2 text-sm font-medium text-gray-900"
                  >
                    {{ match.id }}
                  </td>
                  <td class="px-2 sm:px-4 py-2 text-sm text-gray-900">
                    {{ match.score | number : "1.2-2" }}
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ match.matchedDate | date : "short" }}
                  </td>
                  <td class="px-2 sm:px-4 py-2 text-sm">
                    <span
                      [ngClass]="{
                        'px-2 py-0.5 text-xs font-semibold rounded-full': true,
                        'bg-red-100 text-red-800': match.isArchived,
                        'bg-green-100 text-green-800': !match.isArchived
                      }"
                    >
                      {{ match.isArchived ? "Yes" : "No" }}
                    </span>
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ match.researcherId }}
                  </td>
                  <td class="px-2 sm:px-4 py-2 text-sm text-gray-900">
                    <div class="truncate" [title]="match.researcherName">
                      {{ match.researcherName }}
                    </div>
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ match.grantId }}
                  </td>
                  <td class="px-2 sm:px-4 py-2 text-sm text-gray-900">
                    <div class="line-clamp-2" [title]="match.grantTitle">
                      {{ match.grantTitle }}
                    </div>
                  </td>
                  <td
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 xl:table-cell hidden"
                  >
                    <div
                      class="line-clamp-3 whitespace-normal"
                      [title]="match.grantSource"
                    >
                      {{ match.grantSource }}
                    </div>
                  </td>
                  <!-- Project ID cell - hide when triMatch form control is true -->
                  <td
                    *ngIf="this.hideProjectCol"
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 lg:table-cell hidden"
                  >
                    {{ match.projectId }}
                  </td>
                  <!-- Project Title cell - hide when triMatch form control is true -->
                  <td
                    *ngIf="this.hideProjectCol"
                    class="px-2 sm:px-4 py-2 text-sm text-gray-900"
                  >
                    <div class="line-clamp-2" [title]="match.projectTitle">
                      {{ match.projectTitle }}
                    </div>
                  </td>
                  <!-- Project Org cell - hide when triMatch form control is true -->
                  <td
                    *ngIf="this.hideProjectCol"
                    class="px-2 sm:px-4 py-2 text-sm text-gray-500 xl:table-cell hidden"
                  >
                    <div
                      class="line-clamp-3 whitespace-normal"
                      [title]="match.projectOrganization"
                    >
                      {{ match.projectOrganization }}
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- Mobile Card View -->
          <div
            *ngIf="!matchLoading() && matches().length > 0"
            class="md:hidden space-y-4"
          >
            <div
              *ngFor="let match of matches()"
              class="bg-white rounded-lg shadow border border-gray-200 p-4"
            >
              <div class="flex justify-between items-start">
                <h3 class="font-medium text-gray-900">
                  {{ match.researcherName }}
                </h3>
                <span
                  [ngClass]="{
                    'px-2 py-1 text-xs font-semibold rounded-full': true,
                    'bg-red-100 text-red-800': match.isArchived,
                    'bg-green-100 text-green-800': !match.isArchived
                  }"
                >
                  {{ match.isArchived ? "Archived" : "Active" }}
                </span>
              </div>
              <div class="mt-2">
                <p class="text-sm text-gray-900 font-medium line-clamp-2">
                  {{ match.grantTitle }}
                </p>
                <p class="text-xs text-gray-500">{{ match.grantSource }}</p>
              </div>
              <!-- Add project information to mobile view - hide when triMatch form control is true -->
              <div class="mt-2" *ngIf="this.hideProjectCol">
                <p class="text-sm text-gray-900 font-medium line-clamp-2">
                  Project: {{ match.projectTitle }}
                </p>
                <p
                  class="text-xs text-gray-500"
                  *ngIf="match.projectOrganization"
                >
                  {{ match.projectOrganization }}
                </p>
              </div>
              <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                <div>
                  <span class="text-gray-500">Match ID:</span>
                  <span class="font-medium ml-1">{{ match.id }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Score:</span>
                  <span class="font-medium ml-1">{{
                    match.score | number : "1.2-2"
                  }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Date:</span>
                  <span class="font-medium ml-1">{{
                    match.matchedDate | date : "short"
                  }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Researcher ID:</span>
                  <span class="font-medium ml-1">{{ match.researcherId }}</span>
                </div>
                <div>
                  <span class="text-gray-500">Grant ID:</span>
                  <span class="font-medium ml-1">{{ match.grantId }}</span>
                </div>
                <!-- Project ID in mobile view - hide when triMatch form control is true -->
                <div *ngIf="this.hideProjectCol">
                  <span class="text-gray-500">Project ID:</span>
                  <span class="font-medium ml-1">{{ match.projectId }}</span>
                </div>
              </div>
            </div>
          </div>
          <!-- Empty state if no matches -->
          <div
            *ngIf="!matchLoading() && matches().length === 0 && !matchError()"
            class="bg-white rounded-lg shadow-md border border-gray-200 p-6"
          >
            <div class="flex flex-col items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-10 w-10 text-gray-400 mb-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <p class="text-center text-gray-500">
                No matches found matching your filters.
              </p>
              <p class="mt-1 text-center text-gray-500">
                Try adjusting your search criteria.
              </p>
            </div>
          </div>
          <!-- Error state -->
          <div
            *ngIf="matchError()"
            class="bg-white rounded-lg shadow-md border border-red-200 p-6"
          >
            <div class="flex flex-col items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-10 w-10 text-red-400 mb-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <p class="text-center text-red-500">
                {{ matchError() }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <div id="get-a-single-match" class="max-w-9xl mx-auto mb-8 mt-8">
        <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 mb-4">
          <h2 class="text-xl font-semibold mb-2">Get a single match</h2>
          <p class="text-gray-700 mb-2">
            Retrieves detailed information about a specific match between a
            researcher and grant using its unique identifier.
          </p>
          <div class="text-sm text-gray-600">
            <p>
              Endpoint: <span class="font-mono">GET /match/{{'{{id}}'}}</span>
            </p>
            <p>
              Endpoint sample:
              <a
                href="https://api.research.profoundimpact.com/v1/match/216070"
                class="text-indigo-600 hover:text-indigo-800"
                target="_blank"
                >https://api.research.profoundimpact.com/v1/match/216070</a
              >
            </p>
          </div>
        </div>
        <!-- Input for match ID and fetch button -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
          <div class="flex items-end space-x-4">
            <div class="flex-grow">
              <label
                for="matchId"
                class="block text-sm font-medium text-gray-700 mb-1"
                >Match ID:</label
              >
              <input
                type="number"
                id="matchId"
                #matchIdInput
                placeholder="Enter match ID"
                class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
              <!-- Add checkbox for triMatch parameter -->
              <div class="flex items-center mt-2">
                <input
                  id="includeTriMatch"
                  type="checkbox"
                  [checked]="includeTriMatch()"
                  (change)="toggleTriMatch()"
                  class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"
                />
                <label
                  for="includeTriMatch"
                  class="ml-2 block text-sm text-gray-700"
                >
                  Include tri-match data (projects, grants, and researchers)
                </label>
              </div>
              <div class="text-xs text-gray-500 mt-1">
                Will request with:
                <code class="bg-gray-100 px-1 py-0.5 rounded"
                  >?triMatch={{ includeTriMatch() ? "true" : "false" }}</code
                >
              </div>
            </div>
            <button
              (click)="getSingleMatch(matchIdInput.value)"
              class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              <span *ngIf="!singleMatchLoading()">Fetch Match</span>
              <span *ngIf="singleMatchLoading()" class="flex items-center">
                <svg
                  class="animate-spin -ml-1 mr-2 h-4 w-4 text-white"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                >
                  <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"
                  ></circle>
                  <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                  ></path>
                </svg>
                Loading...
              </span>
            </button>
          </div>
        </div>
        <!-- Error message -->
        <div
          *ngIf="singleMatchError()"
          class="bg-red-50 border-l-4 border-red-500 p-4 mb-6"
        >
          <div class="flex">
            <div class="flex-shrink-0">
              <svg
                class="h-5 w-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="ml-3">
              <p class="text-sm text-red-700">{{ singleMatchError() }}</p>
            </div>
          </div>
        </div>
        <!-- Match details display -->
        <div
          *ngIf="singleMatch() && !singleMatchLoading()"
          class="bg-white shadow overflow-hidden sm:rounded-lg mb-8"
        >
          <!-- Header -->
          <div
            class="px-4 py-5 sm:px-6 bg-indigo-50 flex justify-between items-center"
          >
            <div>
              <h3 class="text-lg leading-6 font-medium text-gray-900">
                Match #{{ singleMatch().id }}
              </h3>
              <p class="mt-1 max-w-2xl text-sm text-gray-500">
                Matched: {{ singleMatch().matchedDate | date : "mediumDate" }}
              </p>
            </div>
            <span
              [ngClass]="{
                'px-3 py-1 text-sm font-semibold rounded-full': true,
                'bg-green-100 text-green-800': !singleMatch().isArchived,
                'bg-red-100 text-red-800': singleMatch().isArchived
              }"
            >
              {{ singleMatch().isArchived ? "Archived" : "Active" }}
            </span>
          </div>
          <!-- Match Score -->
          <div class="bg-white px-4 py-5 sm:px-6 border-b border-gray-200">
            <div class="flex items-center">
              <div class="text-2xl font-bold text-indigo-600">
                {{ singleMatch().score }}%
              </div>
              <div class="ml-4">
                <span class="text-sm font-medium text-gray-900"
                  >Match Score</span
                >
                <p class="text-xs text-gray-500">
                  Based on keyword and research area similarity
                </p>
              </div>
            </div>
          </div>
          <!-- Researcher Information -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Researcher Information
            </h3>
          </div>
          <div class="border-t border-gray-200">
            <dl>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Researcher ID</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().researcher.id }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Name</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().researcher.name }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Faculty</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().researcher.faculty }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Program</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().researcher.program }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Role</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().researcher.role }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Organization</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().researcher.organization }}
                </dd>
              </div>
            </dl>
          </div>
          <!-- Grant Information -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Grant Information
            </h3>
          </div>
          <div class="border-t border-gray-200">
            <dl>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Grant ID</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().grant.id }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Title</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().grant.title }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Source</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().grant.source }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Website</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <a
                    *ngIf="singleMatch().grant.url"
                    [href]="singleMatch().grant.url"
                    target="_blank"
                    class="text-indigo-600 hover:text-indigo-900"
                  >
                    {{ singleMatch().grant.url }}
                  </a>
                  <span *ngIf="!singleMatch().grant.url">Not available</span>
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Funding</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <div class="flex space-x-6">
                    <div *ngIf="singleMatch().grant.budget">
                      <span class="font-medium">Budget:</span>
                      {{ singleMatch().grant.budget }}
                    </div>
                    <div *ngIf="singleMatch().grant.awardAmount">
                      <span class="font-medium">Award Amount:</span>
                      {{ singleMatch().grant.awardAmount }}
                    </div>
                  </div>
                </dd>
              </div>
            </dl>
          </div>

          <!-- Project Information (new section that matches the style of other sections) -->
          <div
            *ngIf="singleMatch().project && singleMatch().project.id"
            class="px-4 py-5 sm:px-6 bg-indigo-50"
          >
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Project Information
            </h3>
          </div>
          <div
            *ngIf="singleMatch().project && singleMatch().project.id"
            class="border-t border-gray-200"
          >
            <dl>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Project ID</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().project.id }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Title</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().project.title }}
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Organization</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().project.organization }}
                </dd>
              </div>
              <div
                class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Website</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <a
                    *ngIf="singleMatch().project.url"
                    [href]="singleMatch().project.url"
                    target="_blank"
                    class="text-indigo-600 hover:text-indigo-900"
                  >
                    {{ singleMatch().project.url }}
                  </a>
                  <span *ngIf="!singleMatch().project.url">Not available</span>
                </dd>
              </div>
              <div
                class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"
              >
                <dt class="text-sm font-medium text-gray-500">Source</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  {{ singleMatch().project.source || "Not available" }}
                </dd>
              </div>
            </dl>
          </div>

          <!-- Deadlines Information -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Deadlines
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:p-0">
            <dl class="sm:divide-y sm:divide-gray-200">
              <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Deadline Info</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <div class="flex space-x-6">
                    <div>
                      <span class="font-medium">Type:</span>
                      {{ singleMatch().grant.deadlineType }}
                    </div>
                    <div>
                      <span class="font-medium">Intake:</span>
                      {{ singleMatch().grant.deadlineIntake }}
                    </div>
                    <div>
                      <span class="font-medium">Stage:</span>
                      {{ singleMatch().grant.deadlineStage }}
                    </div>
                    <div>
                      <span class="font-medium">Status:</span>
                      {{
                        singleMatch().grant.isContinuous
                          ? "Continuous"
                          : "Regular"
                      }}
                    </div>
                  </div>
                </dd>
              </div>
              <div class="py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">
                  Application Deadlines
                </dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                  <div class="space-y-3">
                    <div
                      *ngFor="
                        let deadline of singleMatch().grant.deadlines;
                        let i = index
                      "
                      class="p-3 border border-gray-200 rounded-md"
                    >
                      <div class="font-medium">Deadline Set {{ i + 1 }}</div>
                      <div class="mt-2 grid grid-cols-2 gap-4">
                        <div>
                          <span class="text-gray-500"
                            >Application Deadline:</span
                          >
                          <div class="font-medium">
                            {{ deadline.applicationDeadline | date }}
                          </div>
                        </div>
                        <div>
                          <span class="text-gray-500"
                            >Registration of Intent:</span
                          >
                          <div class="font-medium">
                            {{ deadline.registrationOfIntentDeadline | date }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </dd>
              </div>
            </dl>
          </div>
          <!-- Areas of Research -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Areas of Research
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let aor of singleMatch().AreaOfResearches"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"
              >
                {{ aor }}
              </span>
            </div>
          </div>
          <!-- Disciplines -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Disciplines
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <div class="flex flex-wrap gap-2">
              <span
                *ngFor="let discipline of singleMatch().disciplines"
                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"
              >
                {{ discipline }}
              </span>
            </div>
          </div>
          <!-- Keywords -->
          <div class="px-4 py-5 sm:px-6 bg-indigo-50">
            <h3 class="text-lg leading-6 font-medium text-gray-900">
              Keyword Matches
            </h3>
          </div>
          <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Researcher Keyword
                  </th>
                  <th
                    scope="col"
                    class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Grant Keyword
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let keyword of singleMatch().keywords">
                  <td class="px-4 py-3 whitespace-nowrap">
                    <div class="text-sm font-medium text-purple-700">
                      {{ keyword.rk }}
                    </div>
                  </td>
                  <td class="px-4 py-3 whitespace-nowrap">
                    <div class="text-sm font-medium text-indigo-700">
                      {{ keyword.gk }}
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
